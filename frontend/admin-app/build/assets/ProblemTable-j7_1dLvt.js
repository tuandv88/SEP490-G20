import{j as e,J as i,u as A,a6 as W,a7 as X,R as n,N as f,g as Y,P as Z}from"./index-CZHDJBCk.js";import{E as ee,k as se,u as te,g as ae,b as le,c as re,d as ne,e as oe,f as ie,T as u,h as ce,i as M,j as C,a as h}from"./index-BTeMg9Kl.js";import{I as de}from"./index-CsZvwwPz.js";import{D as I,a as T,b as E,c as me,d as b,e as ue,h as ge}from"./dropdown-menu-D8phL3t5.js";import{S as he,a as xe,b as pe,c as je,d as w}from"./select-DvMDIVW3.js";import{C as R}from"./checkbox-B1DyU385.js";import{B as S}from"./badge-DPmApw2E.js";import{a as fe,g as Ce}from"./problemApi-DwmKlxuZ.js";import{A as be}from"./arrow-up-down-D6OnXJC2.js";import{C as we}from"./circle-plus-CTcEOYkI.js";import"./index-DQUYlbEB.js";import"./index-Fh3QMK6n.js";import"./index-Dg4EHzo4.js";import"./axios-OWqOmaEp.js";import"./axios-CCb-kr4I.js";const c=se(),x=[c.display({id:"select",header:({table:a})=>e.jsx(R,{checked:a.getIsAllPageRowsSelected(),onCheckedChange:l=>a.toggleAllPageRowsSelected(!!l),"aria-label":"Select all"}),cell:({row:a})=>e.jsx(R,{checked:a.getIsSelected(),onCheckedChange:l=>a.toggleSelected(!!l),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1}),c.accessor("title",{header:({column:a})=>e.jsxs(i,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"font-bold",children:["Title",e.jsx(be,{className:"ml-2 h-4 w-4"})]})}),c.accessor("difficulty",{header:"Difficulty",cell:({row:a})=>{const l=a.getValue("difficulty");return e.jsx(S,{variant:l==="Easy"?"success":l==="Medium"?"warning":"destructive",children:l})}}),c.accessor("acceptance",{header:"Acceptance",cell:({row:a})=>{const l=a.getValue("acceptance");return l===-1?e.jsx("span",{className:"text-muted-foreground",children:"No data"}):e.jsxs(S,{variant:"secondary",children:[l.toFixed(1),"%"]})}}),c.accessor("isActive",{header:"Status",cell:({row:a})=>{const l=a.getValue("isActive");return e.jsx(S,{variant:l?"success":"secondary",children:l?"Active":"Inactive"})}}),c.display({id:"actions",cell:({row:a})=>{const l=a.original,p=A(),g=l.problemsId;return e.jsxs(I,{children:[e.jsx(T,{asChild:!0,children:e.jsxs(i,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ee,{className:"h-4 w-4"})]})}),e.jsxs(E,{align:"end",children:[e.jsx(me,{children:"Actions"}),e.jsx(b,{onClick:()=>navigator.clipboard.writeText(g),children:"Copy problem ID"}),e.jsx(ue,{}),e.jsx(b,{onClick:()=>p({to:W,params:{problemId:g}}),children:"Edit problem"}),e.jsx(b,{onClick:()=>fe(l.problemsId),children:"Delete problem"})]})]})}})];function Se(){var y,P;const a=X({from:Z}),l=A(),p=n.useMemo(()=>{try{return a.page?parseInt(a.page):1}catch(t){return console.error("Error parsing page from URL:",t),1}},[a.page]),[g,k]=n.useState([]),[d,j]=n.useState(!0),[v,D]=n.useState(null),[N,F]=n.useState(0),[V,H]=n.useState([]),[z,B]=n.useState([]),[_,L]=n.useState({}),[O,U]=n.useState({}),[o,$]=n.useState({pageIndex:p-1,pageSize:3});n.useEffect(()=>{(async()=>{try{j(!0);const s=await Ce(o.pageIndex+1,o.pageSize);console.log(s),k(s.problems.data),F(s.problems.count),j(!1)}catch(s){console.error("Error fetching data: ",s),D("An error occurred while fetching data. Please try again later."),j(!1)}})()},[o.pageIndex,o.pageSize]),n.useEffect(()=>{l({search:t=>({...t,page:o.pageIndex+1})},{replace:!0})},[o.pageIndex,l]);const G=()=>{l({to:Y})},r=te({data:g,columns:x,pageCount:Math.ceil(N/o.pageSize),onSortingChange:H,onColumnFiltersChange:B,getCoreRowModel:ae(),getPaginationRowModel:le(),getSortedRowModel:re(),getFilteredRowModel:ne(),onColumnVisibilityChange:L,onRowSelectionChange:U,onPaginationChange:$,state:{sorting:V,columnFilters:z,columnVisibility:_,rowSelection:O,pagination:o},manualPagination:!0}),J=r.getState().columnFilters.length>0,q=n.useCallback(()=>{r.resetColumnFilters()},[r]),K=()=>{var t;return d?e.jsx(C,{children:[...Array(o.pageSize)].map((s,m)=>e.jsx(u,{children:x.map((ve,Q)=>e.jsx(h,{children:e.jsx(f,{className:"h-6 w-full"})},Q))},m))}):v?e.jsx(C,{children:e.jsx(u,{children:e.jsxs(h,{colSpan:x.length,className:"h-24 text-center",children:["Error: ",v]})})}):e.jsx(C,{children:(t=r.getRowModel().rows)!=null&&t.length?r.getRowModel().rows.map(s=>e.jsx(u,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map(m=>e.jsx(h,{children:M(m.column.columnDef.cell,m.getContext())},m.id))},s.id)):e.jsx(u,{children:e.jsx(h,{colSpan:x.length,className:"h-24 text-center",children:"No results."})})})};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Problems"}),e.jsxs(i,{onClick:G,className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5"}),"Add New Problem"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center py-4 gap-2",children:[e.jsx(de,{placeholder:"Filter titles...",value:((y=r.getColumn("title"))==null?void 0:y.getFilterValue())??"",onChange:t=>{var s;return(s=r.getColumn("title"))==null?void 0:s.setFilterValue(t.target.value)},className:"max-w-sm"}),e.jsxs(he,{value:((P=r.getColumn("difficulty"))==null?void 0:P.getFilterValue())??"",onValueChange:t=>{var s;return(s=r.getColumn("difficulty"))==null?void 0:s.setFilterValue(t)},children:[e.jsx(xe,{className:"w-[180px]",children:e.jsx(pe,{placeholder:"Select difficulty"})}),e.jsxs(je,{children:[e.jsx(w,{value:"Easy",children:"Easy"}),e.jsx(w,{value:"Medium",children:"Medium"}),e.jsx(w,{value:"Hard",children:"Hard"})]})]}),J&&e.jsx(i,{onClick:q,variant:"outline",size:"sm",children:"Clear Filters"}),e.jsxs(I,{children:[e.jsx(T,{asChild:!0,children:e.jsx(i,{variant:"outline",className:"ml-auto",children:"Columns"})}),e.jsx(E,{align:"end",children:r.getAllColumns().filter(t=>t.getCanHide()).map(t=>e.jsx(ge,{className:"capitalize",checked:t.getIsVisible(),onCheckedChange:s=>t.toggleVisibility(!!s),children:t.id},t.id))})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(oe,{children:[e.jsx(ie,{children:r.getHeaderGroups().map(t=>e.jsx(u,{children:t.headers.map(s=>e.jsx(ce,{className:"font-bold",children:s.isPlaceholder?null:M(s.column.columnDef.header,s.getContext())},s.id))},t.id))}),K()]})}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsx("div",{className:"flex-1 text-sm text-muted-foreground",children:d?e.jsx(f,{className:"h-4 w-[250px]"}):`${r.getFilteredSelectedRowModel().rows.length} of ${N} row(s) selected.`}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>r.previousPage(),disabled:!r.getCanPreviousPage()||d,children:"Previous"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-primary text-sm font-medium text-primary-foreground",children:d?e.jsx(f,{className:"h-4 w-4"}):r.getState().pagination.pageIndex+1})}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>r.nextPage(),disabled:!r.getCanNextPage()||d,children:"Next"})]})]})]})}function Be(){return e.jsx("div",{className:"container mx-auto py-10 px-4",children:e.jsx(Se,{})})}export{Be as default};
//# sourceMappingURL=ProblemTable-j7_1dLvt.js.map

import{r as m,j as e,Y as ie,E as x,q as D,v as z,w as G,x as $,N as ge,a0 as Ne,u as ve,H as k}from"./index--0QK1py9.js";import{S as X,A as ye,b as Ce,c as be,d as we,e as qe,f as Te,g as Ae,h as Se}from"./alert-dialog-44o-75vc.js";import{u as re,b as ae,C as u}from"./index.esm-DpCIhZqu.js";import{o as J,s as K,b as W,e as Z,n as le,a as ce,t as oe}from"./index-eHZHAmfB.js";import{I as U}from"./index-DCCljha-.js";import{L as C}from"./label--2Dd6Xb2.js";import{S as B,a as H,b as Y,c as _,d as M}from"./select-CkkvPfhu.js";import{D as de,a as me,b as ue,c as xe,d as he}from"./dialog-Bx1Lxwmr.js";import{c as Oe,u as Ee,A as ke,a as Qe,b as Fe,I as Ie,d as Me,e as Le,g as Re,f as Pe}from"./accordion-CsjeTkUs.js";import{u as se}from"./use-toast-BSHZ4QUe.js";import{T as ee}from"./trash-2-hRCeANK2.js";import{P as te}from"./plus-C3zHGkbA.js";import{P as f}from"./index-BzgUoul7.js";import{B as pe}from"./badge-v9T6Y60L.js";import{T as De,a as ze,b as Ve,c as $e}from"./tooltip-CP8HNIJZ.js";import{e as Ue}from"./problemApi-D_lYKErb.js";import{C as Be}from"./code-0wckQy-k.js";import{F as je}from"./file-question-C391iaKW.js";import{S as ne}from"./square-pen-CIUUGTRb.js";import{u as He}from"./store-Cw-riNrU.js";import{C as Ye}from"./chevron-left-CBoXycdj.js";import{C as _e}from"./clock-BLEnB3YY.js";import{R as Xe}from"./rotate-ccw-DYPL32qL.js";import"./index-DdpAazCY.js";import"./index-goUZiQpb.js";import"./index-CaMr_zbb.js";import"./axios-CDwYrkV6.js";import"./axios-CCb-kr4I.js";const Ge=["MultipleChoice","MultipleSelect","TrueFalse"],Je=["EASY","MEDIUM","HARD","EXPERT"],Ke=J({content:K().min(1,"Content is required"),isActive:W(),questionType:Z(["MultipleChoice","MultipleSelect","TrueFalse","CodeSnippet"]),questionLevel:Z(["EASY","MEDIUM","HARD","EXPERT"]),mark:le().min(1,"Mark must be at least 1"),questionOptions:ce(J({content:K().min(1,"Option content is required"),isCorrect:W()})).min(2,"At least two answer options are required").refine(i=>i.some(h=>h.isCorrect),{message:"At least one correct answer is required",path:["questionOptions"]})});function We({onClose:i,quizId:h,setIsUpdate:S,isUpdate:L}){var F;const[q,b]=m.useState("MultipleChoice"),{toast:g}=se(),[n,T]=m.useState(!1),{control:c,handleSubmit:w,formState:{errors:a},watch:A,setValue:O,trigger:p}=re({resolver:oe(Ke),defaultValues:{content:"",isActive:!0,questionType:"MultipleChoice",questionLevel:"EASY",mark:1,questionOptions:[{content:"",isCorrect:!0},{content:"",isCorrect:!1}]}}),{fields:E,append:R,remove:Q}=ae({control:c,name:"questionOptions"}),j=A("questionType"),r=A("questionOptions");m.useEffect(()=>{if(j==="MultipleChoice"&&r.filter(s=>s.isCorrect).length>1){const s=r.findIndex(d=>d.isCorrect);r.forEach((d,l)=>{O(`questionOptions.${l}.isCorrect`,l===s)})}p("questionOptions")},[j,r,O,p]),m.useEffect(()=>{r&&(T(!1),p("questionOptions"))},[r,p]);const N=async t=>{if(T(!0),console.log("Form errors:",a),Object.keys(a).length>0)return;const s=t.questionOptions.map((l,v)=>({...l,orderIndex:v})),d={createQuestionDto:{...t,questionOptions:s}};try{await Oe(d,h),S(!L),g({title:"Success",description:"Question created successfully",duration:1500}),i()}catch(l){g({title:"Error",description:l.message,variant:"destructive",duration:1500})}};return e.jsx(de,{open:!0,onOpenChange:i,children:e.jsxs(me,{className:"max-w-[500px] h-[600px] p-0 overflow-hidden flex flex-col",children:[e.jsx(ue,{className:"px-6 py-4 border-b",children:e.jsx(xe,{className:"text-xl font-semibold",children:"Add New Question"})}),e.jsx(ie,{className:"flex-grow px-6 py-4",children:e.jsxs("form",{onSubmit:w(N),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"content",children:"Question Content"}),e.jsx(u,{name:"content",control:c,render:({field:t})=>e.jsx(U,{id:"content",...t,placeholder:"Enter your question here"})}),n&&a.content&&e.jsx("p",{className:"text-sm text-red-500",children:a.content.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{name:"isActive",control:c,render:({field:t})=>e.jsx(X,{id:"isActive",checked:t.value,onCheckedChange:t.onChange})}),e.jsx(C,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"questionType",children:"Question Type"}),e.jsx(u,{name:"questionType",control:c,render:({field:t})=>e.jsxs(B,{onValueChange:s=>{t.onChange(s),b(s)},value:t.value,children:[e.jsx(H,{id:"questionType",children:e.jsx(Y,{placeholder:"Select type"})}),e.jsx(_,{children:Ge.map(s=>e.jsx(M,{value:s,children:s},s))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"questionLevel",children:"Difficulty Level"}),e.jsx(u,{name:"questionLevel",control:c,render:({field:t})=>e.jsxs(B,{onValueChange:t.onChange,value:t.value,children:[e.jsx(H,{id:"questionLevel",children:e.jsx(Y,{placeholder:"Select level"})}),e.jsx(_,{children:Je.map(s=>e.jsx(M,{value:s,children:s.charAt(0)+s.slice(1).toLowerCase()},s))})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"mark",children:"Mark"}),e.jsx(u,{name:"mark",control:c,render:({field:t})=>e.jsx(U,{id:"mark",type:"number",...t,onChange:s=>t.onChange(parseInt(s.target.value)),min:1})}),n&&a.mark&&e.jsx("p",{className:"text-sm text-red-500",children:a.mark.message})]}),(q==="MultipleChoice"||q==="MultipleSelect")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Answer Options"}),e.jsx("div",{className:"max-h-[200px] overflow-y-auto pr-2",children:E.map((t,s)=>{var d,l;return e.jsxs("div",{className:"flex flex-col gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{name:`questionOptions.${s}.content`,control:c,render:({field:v})=>e.jsx(U,{...v,placeholder:`Option ${s+1}`,className:"flex-1"})}),e.jsx(u,{name:`questionOptions.${s}.isCorrect`,control:c,render:({field:{value:v,onChange:V}})=>e.jsx(X,{checked:v,onCheckedChange:I=>{q==="MultipleChoice"&&I?r.forEach((y,o)=>{O(`questionOptions.${o}.isCorrect`,o===s)}):V(I),p("questionOptions")},className:"mx-2"})}),e.jsx(x,{type:"button",variant:"ghost",size:"icon",onClick:()=>Q(s),className:"h-8 w-8",disabled:E.length<=2,children:e.jsx(ee,{className:"h-4 w-4"})})]}),n&&((l=(d=a.questionOptions)==null?void 0:d[s])==null?void 0:l.content)&&e.jsx("p",{className:"text-sm text-red-500",children:a.questionOptions[s].content.message})]},t.id)})}),n&&a.questionOptions&&"root"in a.questionOptions&&e.jsx("p",{className:"text-sm text-red-500",children:(F=a.questionOptions.root)==null?void 0:F.message}),e.jsxs(x,{type:"button",onClick:()=>R({content:"",isCorrect:!1}),variant:"outline",className:"w-full mt-2",children:[e.jsx(te,{className:"h-4 w-4 mr-2 mt-1"}),"Add Answer Option"]})]}),j==="TrueFalse"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Correct Answer"}),e.jsx(u,{name:"questionOptions",control:c,defaultValue:[{content:"True",isCorrect:!0},{content:"False",isCorrect:!1}],render:({field:t})=>e.jsxs(B,{onValueChange:s=>t.onChange([{content:"True",isCorrect:s==="True"},{content:"False",isCorrect:s==="False"}]),defaultValue:"True",children:[e.jsx(H,{children:e.jsx(Y,{placeholder:"Select correct answer"})}),e.jsxs(_,{children:[e.jsx(M,{value:"True",children:"True"}),e.jsx(M,{value:"False",children:"False"})]})]})})]})]})}),e.jsx(he,{className:"px-6 py-4 border-t",children:e.jsxs("div",{className:"flex justify-end space-x-2 w-full",children:[e.jsx(x,{variant:"outline",onClick:i,children:"Cancel"}),e.jsx(x,{onClick:()=>{T(!0),w(N)()},children:"Add Question"})]})})]})})}const Ze=["MultipleChoice","MultipleSelect","TrueFalse"],es=["EASY","MEDIUM","HARD","EXPERT"],ss=J({content:K().min(1,"Content is required"),isActive:W(),questionType:Z(["MultipleChoice","MultipleSelect","TrueFalse","CodeSnippet"]),questionLevel:Z(["EASY","MEDIUM","HARD","EXPERT"]),mark:le().min(1,"Mark must be at least 1"),questionOptions:ce(J({content:K().min(1,"Option content is required"),isCorrect:W()})).min(2,"At least two answer options are required").refine(i=>i.some(h=>h.isCorrect),{message:"At least one correct answer is required",path:["questionOptions"]})});function ts({quizId:i,question:h,onSave:S,onCancel:L}){var F;const{toast:q}=se(),[b,g]=m.useState(!1),[n,T]=m.useState(!1),{control:c,handleSubmit:w,formState:{errors:a},watch:A,setValue:O,trigger:p}=re({resolver:oe(ss),defaultValues:{...h,questionOptions:h.questionOptions.map(t=>({content:t.content,isCorrect:t.isCorrect}))}}),{fields:E,append:R,remove:Q}=ae({control:c,name:"questionOptions"}),j=A("questionType"),r=A("questionOptions");m.useEffect(()=>{if(j==="MultipleChoice"&&r.filter(s=>s.isCorrect).length>1){const s=r.findIndex(d=>d.isCorrect);r.forEach((d,l)=>{O(`questionOptions.${l}.isCorrect`,l===s)})}p("questionOptions")},[j,r,O,p]),m.useEffect(()=>{r&&(g(!1),p("questionOptions"))},[r,p]);const N=async t=>{if(g(!0),Object.keys(a).length>0)return;T(!0);const s=t.questionOptions.map((l,v)=>({id:l.id,content:l.content,isCorrect:l.isCorrect,orderIndex:v})),d={question:{isActive:t.isActive,content:t.content,questionType:t.questionType,questionLevel:t.questionLevel,mark:t.mark,problemId:h.problemId,problem:h.problem,questionOptions:s}};try{const l=await Ee(i,h.id,d);q({title:"Success",description:"Question updated successfully",duration:1500}),S(l)}catch(l){q({title:"Error",description:l.message||"Failed to update question",variant:"destructive",duration:1500})}finally{T(!1)}};return e.jsx(de,{open:!0,onOpenChange:L,children:e.jsxs(me,{className:"max-w-[500px] h-[600px] p-0 overflow-hidden flex flex-col",children:[e.jsx(ue,{className:"px-6 py-4 border-b",children:e.jsx(xe,{className:"text-xl font-semibold",children:"Edit Question"})}),e.jsx(ie,{className:"flex-grow px-6 py-4",children:e.jsxs("form",{onSubmit:w(N),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"content",children:"Question Content"}),e.jsx(u,{name:"content",control:c,render:({field:t})=>e.jsx(U,{id:"content",...t,placeholder:"Enter your question here"})}),b&&a.content&&e.jsx("p",{className:"text-sm text-red-500",children:a.content.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{name:"isActive",control:c,render:({field:t})=>e.jsx(X,{id:"isActive",checked:t.value,onCheckedChange:t.onChange})}),e.jsx(C,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"questionType",children:"Question Type"}),e.jsx(u,{name:"questionType",control:c,render:({field:t})=>e.jsxs(B,{onValueChange:t.onChange,value:t.value,children:[e.jsx(H,{id:"questionType",children:e.jsx(Y,{placeholder:"Select type"})}),e.jsx(_,{children:Ze.map(s=>e.jsx(M,{value:s,children:s},s))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"questionLevel",children:"Difficulty Level"}),e.jsx(u,{name:"questionLevel",control:c,render:({field:t})=>e.jsxs(B,{onValueChange:t.onChange,value:t.value,children:[e.jsx(H,{id:"questionLevel",children:e.jsx(Y,{placeholder:"Select level"})}),e.jsx(_,{children:es.map(s=>e.jsx(M,{value:s,children:s.charAt(0)+s.slice(1).toLowerCase()},s))})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"mark",children:"Mark"}),e.jsx(u,{name:"mark",control:c,render:({field:t})=>e.jsx(U,{id:"mark",type:"number",...t,onChange:s=>t.onChange(parseInt(s.target.value)),min:1})}),b&&a.mark&&e.jsx("p",{className:"text-sm text-red-500",children:a.mark.message})]}),(j==="MultipleChoice"||j==="MultipleSelect")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Answer Options"}),e.jsx("div",{className:"max-h-[200px] overflow-y-auto pr-2",children:E.map((t,s)=>{var d,l;return e.jsxs("div",{className:"flex flex-col gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{name:`questionOptions.${s}.content`,control:c,render:({field:v})=>e.jsx(U,{...v,placeholder:`Option ${s+1}`,className:"flex-1"})}),e.jsx(u,{name:`questionOptions.${s}.isCorrect`,control:c,render:({field:{value:v,onChange:V}})=>e.jsx(X,{checked:v,onCheckedChange:I=>{j==="MultipleChoice"&&I?r.forEach((y,o)=>{O(`questionOptions.${o}.isCorrect`,o===s)}):V(I),p("questionOptions")},className:"mx-2"})}),e.jsx(x,{type:"button",variant:"ghost",size:"icon",onClick:()=>Q(s),className:"h-8 w-8",disabled:E.length<=2,children:e.jsx(ee,{className:"h-4 w-4"})})]}),b&&((l=(d=a.questionOptions)==null?void 0:d[s])==null?void 0:l.content)&&e.jsx("p",{className:"text-sm text-red-500",children:a.questionOptions[s].content.message})]},t.id)})}),b&&a.questionOptions&&"root"in a.questionOptions&&e.jsx("p",{className:"text-sm text-red-500",children:(F=a.questionOptions.root)==null?void 0:F.message}),e.jsxs(x,{type:"button",onClick:()=>R({content:"",isCorrect:!1}),variant:"outline",className:"w-full mt-2",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Add Answer Option"]})]}),j==="TrueFalse"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Correct Answer"}),e.jsx(u,{name:"questionOptions",control:c,defaultValue:[{content:"True",isCorrect:!0},{content:"False",isCorrect:!1}],render:({field:t})=>e.jsxs(B,{onValueChange:s=>t.onChange([{content:"True",isCorrect:s==="True"},{content:"False",isCorrect:s==="False"}]),defaultValue:"True",children:[e.jsx(H,{children:e.jsx(Y,{placeholder:"Select correct answer"})}),e.jsxs(_,{children:[e.jsx(M,{value:"True",children:"True"}),e.jsx(M,{value:"False",children:"False"})]})]})})]})]})}),e.jsxs(he,{className:"px-6 py-4 border-t",children:[e.jsx(x,{variant:"outline",onClick:L,disabled:n,children:"Cancel"}),e.jsx(x,{onClick:()=>{g(!0),w(N)()},disabled:n,children:n?"Updating...":"Update Question"})]})]})})}function fe({question:i,onEdit:h,onDelete:S,onToggleActive:L,quizId:q}){const[b,g]=m.useState(!1),[n,T]=m.useState(null),[c,w]=m.useState(!1);m.useEffect(()=>{i.questionType==="CodeSnippet"&&i.problemId&&(async()=>{try{const N=await Ue(i.problemId);T(N)}catch(N){console.error("Error fetching problem details:",N)}})()},[i.questionType,i.problemId]);const a=()=>{g(!0)},A=r=>{h(r),g(!1)},O=()=>{w(!0)},p=()=>{S(i.id),w(!1)},E=()=>{w(!1)},R=()=>{console.log("Editing problem:",n.id)},Q=()=>{console.log("Deleting problem:",n.id)},j=r=>{switch(r){case"CodeSnippet":return"bg-blue-100 text-blue-800 border-blue-300";case"MultipleChoice":return"bg-green-100 text-green-800 border-green-300";case"TrueFalse":return"bg-red-100 text-red-800 border-red-300";case"MultipleSelect":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return e.jsxs(e.Fragment,{children:[e.jsxs(D,{className:"mb-4 overflow-hidden",children:[e.jsx(z,{className:"space-y-0 pb-2",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[i.questionType==="CodeSnippet"?e.jsx(Be,{className:"h-5 w-5 text-blue-500 flex-shrink-0"}):e.jsx(je,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),e.jsx(G,{className:"text-base sm:text-lg font-semibold line-clamp-2",children:i.content})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(De,{children:e.jsxs(ze,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(pe,{variant:i.isActive?"outline":"destructive",className:"text-xs",children:i.isActive?"Active":"Inactive"})}),e.jsx($e,{children:e.jsx("p",{children:"Question status"})})]})}),e.jsx(x,{variant:"ghost",size:"icon",onClick:a,"aria-label":"Edit question",children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"icon",onClick:O,"aria-label":"Delete question",children:e.jsx(ee,{className:"h-4 w-4"})})]})]})}),e.jsxs($,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${j(i.questionType)}`,children:i.questionType}),e.jsxs("div",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-white-100 text-purple-800 border border-purple-300",children:["Level: ",i.questionLevel]}),e.jsxs("div",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-800 border border-orange-300",children:["Mark: ",i.mark]})]}),e.jsx(ke,{type:"single",collapsible:!0,className:"w-full",children:e.jsxs(Qe,{value:"details",children:[e.jsx(Fe,{className:"text-sm font-medium",children:e.jsxs("span",{className:"flex items-center",children:["View Details",e.jsx(Ie,{className:"ml-2 h-4 w-4 text-muted-foreground"})]})}),e.jsxs(Me,{children:[i.questionType==="CodeSnippet"&&n&&e.jsx(D,{className:"mt-2 mb-4 bg-muted",children:e.jsxs(z,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0 pb-2",children:[e.jsxs(G,{className:"text-sm font-medium",children:["Problem: ",n.problemDto.title]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(x,{variant:"ghost",size:"sm",onClick:R,className:"h-8",children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(x,{variant:"ghost",size:"sm",onClick:Q,className:"h-8",children:[e.jsx(ee,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})}),i.questionType!=="CodeSnippet"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Answers:"}),e.jsx("ul",{className:"space-y-1",children:i.questionOptions.map((r,N)=>e.jsxs("li",{className:`flex items-center space-x-2 ${r.isCorrect?"text-green-600":""}`,children:[e.jsx("span",{children:r.isCorrect?"✓":"○"}),e.jsx("span",{className:"text-sm",children:r.content})]},N))})]})]})]})})]})]}),b&&e.jsx(ts,{quizId:q,question:i,onSave:A,onCancel:()=>g(!1)}),e.jsx(ye,{open:c,onOpenChange:w,children:e.jsxs(Ce,{children:[e.jsxs(be,{children:[e.jsx(we,{children:"Are you sure you want to delete this question?"}),e.jsx(qe,{children:"This action cannot be undone. This will permanently delete the question and remove it from the quiz."})]}),e.jsxs(Te,{children:[e.jsx(Ae,{onClick:E,children:"Cancel"}),e.jsx(Se,{onClick:p,children:"Delete"})]})]})})]})}fe.propTypes={question:f.shape({id:f.string.isRequired,content:f.string.isRequired,isActive:f.bool.isRequired,questionType:f.string.isRequired,questionLevel:f.string.isRequired,mark:f.number.isRequired,questionOptions:f.arrayOf(f.shape({content:f.string.isRequired,isCorrect:f.bool.isRequired})).isRequired,problemId:f.string}).isRequired,onEdit:f.func.isRequired,onDelete:f.func.isRequired,onToggleActive:f.func.isRequired};function ks(){var Q,j,r,N,F,t,s,d,l,v,V,I;const{params:i}=ge(Ne.id),{courseIdToBack:h}=He(),{quizId:S}=i,[L,q]=m.useState(!1),[b,g]=m.useState(!1),[n,T]=m.useState(null),[c,w]=m.useState(!0),a=ve(),{toast:A}=se();m.useEffect(()=>{(async()=>{w(!0);try{const o=await Re(S);T(o),console.log(o)}catch(o){console.error("Error fetching quiz detail:",o),A({title:"Error",description:"Failed to load quiz details. Please try again.",variant:"destructive"})}finally{w(!1)}})()},[S,b,A]);const O=y=>{T(o=>({...o,quiz:{...o.quiz,questions:o.quiz.questions.map(P=>P.id===y.id?y:P)}})),g(!b)},p=async y=>{try{await Pe(S,y),g(!b),A({title:"Success",description:"Question deleted successfully",duration:1500})}catch{A({title:"Error",description:"Failed to delete question. Please try again.",variant:"destructive",duration:1500})}},E=y=>{T(o=>({...o,quiz:{...o.quiz,questions:o.quiz.questions.map(P=>P.id===y?{...P,isActive:!P.isActive}:P)}}))},R=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(k,{className:"h-10 w-40"}),e.jsxs(D,{children:[e.jsx(z,{children:e.jsx(k,{className:"h-8 w-3/4"})}),e.jsxs($,{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{className:"h-6 w-full"}),e.jsx(k,{className:"h-6 w-full"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{className:"h-6 w-full"}),e.jsx(k,{className:"h-6 w-full"})]})]})]}),e.jsxs(D,{children:[e.jsxs(z,{className:"flex flex-row items-center justify-between",children:[e.jsx(k,{className:"h-8 w-1/4"}),e.jsx(k,{className:"h-10 w-40"})]}),e.jsx($,{children:e.jsx("div",{className:"space-y-4",children:[1,2,3].map(y=>e.jsx(k,{className:"h-24 w-full"},y))})})]})]});return c?e.jsx("div",{className:"container mx-auto p-4 space-y-6",children:e.jsx(R,{})}):e.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[e.jsxs(x,{variant:"outline",className:"flex items-center gap-2",onClick:()=>a({to:`/edit-course/${h}`}),children:[e.jsx(Ye,{className:"h-4 w-4"}),"Back to Curriculum"]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(D,{className:"w-full",children:[e.jsx(z,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(G,{className:"text-2xl font-bold",children:(Q=n==null?void 0:n.quiz)==null?void 0:Q.title}),e.jsx(pe,{variant:(j=n==null?void 0:n.quiz)!=null&&j.isActive?"success":"secondary",children:(r=n==null?void 0:n.quiz)!=null&&r.isActive?"Active":"Inactive"})]})}),e.jsx($,{className:"pt-0",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted",children:e.jsx(je,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Quiz Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(N=n==null?void 0:n.quiz)==null?void 0:N.quizType})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted",children:e.jsx(Le,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Passing Mark"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(F=n==null?void 0:n.quiz)==null?void 0:F.passingMark,"%"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted",children:e.jsx(_e,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Time Limit"}),((t=n==null?void 0:n.quiz)==null?void 0:t.hasTimeLimit)&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(s=n==null?void 0:n.quiz)==null?void 0:s.timeLimit," minutes"]})]})]}),e.jsx(X,{checked:(d=n==null?void 0:n.quiz)==null?void 0:d.hasTimeLimit})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted",children:e.jsx(Xe,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Attempt Limit"}),((l=n==null?void 0:n.quiz)==null?void 0:l.hasAttemptLimit)&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(v=n==null?void 0:n.quiz)==null?void 0:v.attemptLimit," attempts"]})]})]}),e.jsx(X,{checked:(V=n==null?void 0:n.quiz)==null?void 0:V.hasAttemptLimit})]})]})]})})]}),e.jsx(x,{className:"mt-4 w-full",onClick:()=>q(!0),children:"Add Question Normal"}),e.jsx(x,{className:"mt-4 w-full",onClick:()=>setIsFullScreenPopupOpen(!0),children:"Create Problem Quiz"}),e.jsxs(D,{className:"md:col-span-2",children:[e.jsxs(z,{className:"flex flex-row items-center justify-between",children:[e.jsx(G,{children:"Questions"}),e.jsxs(x,{onClick:()=>q(!0),children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Add Question"]})]}),e.jsx($,{children:e.jsx("div",{className:"space-y-4",children:((I=n==null?void 0:n.quiz)==null?void 0:I.questions.length)>0?n.quiz.questions.map(y=>e.jsx(fe,{quizId:S,question:y,onEdit:O,onDelete:p,onToggleActive:E},y.id)):e.jsx("p",{className:"text-center text-muted-foreground",children:"No questions added yet."})})})]})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50",children:e.jsx("div",{className:"container flex items-center justify-center h-full max-w-lg mx-auto",children:e.jsxs(D,{className:"w-full",children:[e.jsx(z,{children:e.jsx(G,{children:"Add New Question"})}),e.jsx($,{children:e.jsx(We,{quizId:S,setIsUpdate:g,isUpdate:b,onClose:()=>q(!1)})})]})})})]})}export{ks as default};
//# sourceMappingURL=QuizManagement-DYts3aR-.js.map

import{r as o,at as ne,au as se,av as B,aw as oe,ax as H,ay as le,az as ie,aA as ce,aB as K,ac as ue}from"./index--0QK1py9.js";const de="Error preloading route! ☝️";function fe(r,v){const t=ne(),[c,m]=o.useState(!1),p=o.useRef(!1),l=se(v),{activeProps:y=()=>({className:"active"}),inactiveProps:U=()=>({}),activeOptions:s,to:T,preload:w,preloadDelay:q,replace:O,startTransition:j,resetScroll:V,viewTransition:W,children:M,target:d,disabled:n,style:b,className:g,onClick:P,onFocus:k,onMouseEnter:x,onMouseLeave:S,onTouchStart:E,ignoreBlocker:$,...G}=r,{params:pe,search:ve,hash:me,state:ye,mask:Te,...F}=G,I=o.useMemo(()=>{try{return new URL(`${T}`),"external"}catch{}return"internal"},[T]),J=B({select:e=>e.location.search}),i=o.useMemo(()=>t.buildLocation(r),[t,r,J]),f=o.useMemo(()=>w??t.options.defaultPreload,[t.options.defaultPreload,w]),Q=q??t.options.defaultPreloadDelay??0,L=B({select:e=>{if(s!=null&&s.exact){if(!oe(e.location.pathname,i.pathname,t.basepath))return!1}else{const a=H(e.location.pathname,t.basepath).split("/");if(!H(i.pathname,t.basepath).split("/").every((ae,re)=>ae===a[re]))return!1}return((s==null?void 0:s.includeSearch)??!0)&&!le(e.location.search,i.search,{partial:!(s!=null&&s.exact),ignoreUndefined:!(s!=null&&s.explicitUndefined)})?!1:s!=null&&s.includeHash?e.location.hash===i.hash:!0}}),u=o.useCallback(()=>{t.preloadRoute(r).catch(e=>{console.warn(e),console.warn(de)})},[r,t]),X=o.useCallback(e=>{e!=null&&e.isIntersecting&&u()},[u]);if(ie(l,X,{rootMargin:"100px"},{disabled:!!n||f!=="viewport"}),ce(()=>{p.current||!n&&f==="render"&&(u(),p.current=!0)},[n,u,f]),I==="external")return{...F,ref:l,type:I,href:T,...M&&{children:M},...d&&{target:d},...n&&{disabled:n},...b&&{style:b},...g&&{className:g},...P&&{onClick:P},...k&&{onFocus:k},...x&&{onMouseEnter:x},...S&&{onMouseLeave:S},...E&&{onTouchStart:E}};const Y=e=>{if(!n&&!he(e)&&!e.defaultPrevented&&(!d||d==="_self")&&e.button===0){e.preventDefault(),ue.flushSync(()=>{m(!0)});const a=t.subscribe("onResolved",()=>{a(),m(!1)});t.buildAndCommitLocation({...r,replace:O,resetScroll:V,startTransition:j,viewTransition:W,ignoreBlocker:$})}},D=e=>{n||f&&u()},Z=D,ee=e=>{if(n)return;const a=e.target||{};if(f){if(a.preloadTimeout)return;a.preloadTimeout=setTimeout(()=>{a.preloadTimeout=null,u()},Q)}},te=e=>{if(n)return;const a=e.target||{};a.preloadTimeout&&(clearTimeout(a.preloadTimeout),a.preloadTimeout=null)},h=e=>a=>{var _;(_=a.persist)==null||_.call(a),e.filter(Boolean).forEach(A=>{a.defaultPrevented||A(a)})},R=L?K(y,{})??{}:{},C=L?{}:K(U,{}),N=[g,R.className,C.className].filter(Boolean).join(" "),z={...b,...R.style,...C.style};return{...F,...R,...C,href:n?void 0:i.maskedLocation?t.history.createHref(i.maskedLocation.href):t.history.createHref(i.href),ref:l,onClick:h([P,Y]),onFocus:h([k,D]),onMouseEnter:h([x,ee]),onMouseLeave:h([S,te]),onTouchStart:h([E,Z]),disabled:!!n,target:d,...Object.keys(z).length&&{style:z},...N&&{className:N},...n&&{role:"link","aria-disabled":!0},...L&&{"data-status":"active","aria-current":"page"},...c&&{"data-transitioning":"transitioning"}}}const ge=o.forwardRef((r,v)=>{const{_asChild:t,...c}=r,{type:m,ref:p,...l}=fe(c,v),y=typeof c.children=="function"?c.children({isActive:l["data-status"]==="active"}):c.children;return typeof t>"u"&&delete l.disabled,o.createElement(t||"a",{...l,ref:p},y)});function he(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}export{ge as L};
//# sourceMappingURL=link-KhjbQdx0.js.map

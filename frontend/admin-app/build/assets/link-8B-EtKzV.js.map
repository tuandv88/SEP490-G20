{"version":3,"file":"link-8B-EtKzV.js","sources":["../../node_modules/@tanstack/react-router/dist/esm/link.js"],"sourcesContent":["\"use client\";\nimport { jsx } from \"react/jsx-runtime\";\nimport * as React from \"react\";\nimport { flushSync } from \"react-dom\";\nimport { useRouterState } from \"./useRouterState.js\";\nimport { useRouter } from \"./useRouter.js\";\nimport { useForwardedRef, deepEqual, useIntersectionObserver, useLayoutEffect, functionalUpdate } from \"./utils.js\";\nimport { exactPathTest, removeTrailingSlash } from \"./path.js\";\nconst preloadWarning = \"Error preloading route! ☝️\";\nfunction useLinkProps(options, forwardedRef) {\n  const router = useRouter();\n  const [isTransitioning, setIsTransitioning] = React.useState(false);\n  const hasRenderFetched = React.useRef(false);\n  const innerRef = useForwardedRef(forwardedRef);\n  const {\n    // custom props\n    activeProps = () => ({ className: \"active\" }),\n    inactiveProps = () => ({}),\n    activeOptions,\n    to,\n    preload: userPreload,\n    preloadDelay: userPreloadDelay,\n    replace,\n    startTransition,\n    resetScroll,\n    viewTransition,\n    // element props\n    children,\n    target,\n    disabled,\n    style,\n    className,\n    onClick,\n    onFocus,\n    onMouseEnter,\n    onMouseLeave,\n    onTouchStart,\n    ignoreBlocker,\n    ...rest\n  } = options;\n  const {\n    // prevent these from being returned\n    params: _params,\n    search: _search,\n    hash: _hash,\n    state: _state,\n    mask: _mask,\n    ...propsSafeToSpread\n  } = rest;\n  const type = React.useMemo(() => {\n    try {\n      new URL(`${to}`);\n      return \"external\";\n    } catch {\n    }\n    return \"internal\";\n  }, [to]);\n  const currentSearch = useRouterState({ select: (s) => s.location.search });\n  const next = React.useMemo(\n    () => router.buildLocation(options),\n    [router, options, currentSearch]\n  );\n  const preload = React.useMemo(\n    () => userPreload ?? router.options.defaultPreload,\n    [router.options.defaultPreload, userPreload]\n  );\n  const preloadDelay = userPreloadDelay ?? router.options.defaultPreloadDelay ?? 0;\n  const isActive = useRouterState({\n    select: (s) => {\n      if (activeOptions == null ? void 0 : activeOptions.exact) {\n        const testExact = exactPathTest(\n          s.location.pathname,\n          next.pathname,\n          router.basepath\n        );\n        if (!testExact) {\n          return false;\n        }\n      } else {\n        const currentPathSplit = removeTrailingSlash(\n          s.location.pathname,\n          router.basepath\n        ).split(\"/\");\n        const nextPathSplit = removeTrailingSlash(\n          next.pathname,\n          router.basepath\n        ).split(\"/\");\n        const pathIsFuzzyEqual = nextPathSplit.every(\n          (d, i) => d === currentPathSplit[i]\n        );\n        if (!pathIsFuzzyEqual) {\n          return false;\n        }\n      }\n      if ((activeOptions == null ? void 0 : activeOptions.includeSearch) ?? true) {\n        const searchTest = deepEqual(s.location.search, next.search, {\n          partial: !(activeOptions == null ? void 0 : activeOptions.exact),\n          ignoreUndefined: !(activeOptions == null ? void 0 : activeOptions.explicitUndefined)\n        });\n        if (!searchTest) {\n          return false;\n        }\n      }\n      if (activeOptions == null ? void 0 : activeOptions.includeHash) {\n        return s.location.hash === next.hash;\n      }\n      return true;\n    }\n  });\n  const doPreload = React.useCallback(() => {\n    router.preloadRoute(options).catch((err) => {\n      console.warn(err);\n      console.warn(preloadWarning);\n    });\n  }, [options, router]);\n  const preloadViewportIoCallback = React.useCallback(\n    (entry) => {\n      if (entry == null ? void 0 : entry.isIntersecting) {\n        doPreload();\n      }\n    },\n    [doPreload]\n  );\n  useIntersectionObserver(\n    innerRef,\n    preloadViewportIoCallback,\n    { rootMargin: \"100px\" },\n    { disabled: !!disabled || !(preload === \"viewport\") }\n  );\n  useLayoutEffect(() => {\n    if (hasRenderFetched.current) {\n      return;\n    }\n    if (!disabled && preload === \"render\") {\n      doPreload();\n      hasRenderFetched.current = true;\n    }\n  }, [disabled, doPreload, preload]);\n  if (type === \"external\") {\n    return {\n      ...propsSafeToSpread,\n      ref: innerRef,\n      type,\n      href: to,\n      ...children && { children },\n      ...target && { target },\n      ...disabled && { disabled },\n      ...style && { style },\n      ...className && { className },\n      ...onClick && { onClick },\n      ...onFocus && { onFocus },\n      ...onMouseEnter && { onMouseEnter },\n      ...onMouseLeave && { onMouseLeave },\n      ...onTouchStart && { onTouchStart }\n    };\n  }\n  const handleClick = (e) => {\n    if (!disabled && !isCtrlEvent(e) && !e.defaultPrevented && (!target || target === \"_self\") && e.button === 0) {\n      e.preventDefault();\n      flushSync(() => {\n        setIsTransitioning(true);\n      });\n      const unsub = router.subscribe(\"onResolved\", () => {\n        unsub();\n        setIsTransitioning(false);\n      });\n      router.buildAndCommitLocation({\n        ...options,\n        replace,\n        resetScroll,\n        startTransition,\n        viewTransition,\n        ignoreBlocker\n      });\n    }\n  };\n  const handleFocus = (_) => {\n    if (disabled) return;\n    if (preload) {\n      doPreload();\n    }\n  };\n  const handleTouchStart = handleFocus;\n  const handleEnter = (e) => {\n    if (disabled) return;\n    const eventTarget = e.target || {};\n    if (preload) {\n      if (eventTarget.preloadTimeout) {\n        return;\n      }\n      eventTarget.preloadTimeout = setTimeout(() => {\n        eventTarget.preloadTimeout = null;\n        doPreload();\n      }, preloadDelay);\n    }\n  };\n  const handleLeave = (e) => {\n    if (disabled) return;\n    const eventTarget = e.target || {};\n    if (eventTarget.preloadTimeout) {\n      clearTimeout(eventTarget.preloadTimeout);\n      eventTarget.preloadTimeout = null;\n    }\n  };\n  const composeHandlers = (handlers) => (e) => {\n    var _a;\n    (_a = e.persist) == null ? void 0 : _a.call(e);\n    handlers.filter(Boolean).forEach((handler) => {\n      if (e.defaultPrevented) return;\n      handler(e);\n    });\n  };\n  const resolvedActiveProps = isActive ? functionalUpdate(activeProps, {}) ?? {} : {};\n  const resolvedInactiveProps = isActive ? {} : functionalUpdate(inactiveProps, {});\n  const resolvedClassName = [\n    className,\n    resolvedActiveProps.className,\n    resolvedInactiveProps.className\n  ].filter(Boolean).join(\" \");\n  const resolvedStyle = {\n    ...style,\n    ...resolvedActiveProps.style,\n    ...resolvedInactiveProps.style\n  };\n  return {\n    ...propsSafeToSpread,\n    ...resolvedActiveProps,\n    ...resolvedInactiveProps,\n    href: disabled ? void 0 : next.maskedLocation ? router.history.createHref(next.maskedLocation.href) : router.history.createHref(next.href),\n    ref: innerRef,\n    onClick: composeHandlers([onClick, handleClick]),\n    onFocus: composeHandlers([onFocus, handleFocus]),\n    onMouseEnter: composeHandlers([onMouseEnter, handleEnter]),\n    onMouseLeave: composeHandlers([onMouseLeave, handleLeave]),\n    onTouchStart: composeHandlers([onTouchStart, handleTouchStart]),\n    disabled: !!disabled,\n    target,\n    ...Object.keys(resolvedStyle).length && { style: resolvedStyle },\n    ...resolvedClassName && { className: resolvedClassName },\n    ...disabled && {\n      role: \"link\",\n      \"aria-disabled\": true\n    },\n    ...isActive && { \"data-status\": \"active\", \"aria-current\": \"page\" },\n    ...isTransitioning && { \"data-transitioning\": \"transitioning\" }\n  };\n}\nfunction createLink(Comp) {\n  return React.forwardRef(function CreatedLink(props, ref) {\n    return /* @__PURE__ */ jsx(Link, { ...props, _asChild: Comp, ref });\n  });\n}\nconst Link = React.forwardRef(\n  (props, ref) => {\n    const { _asChild, ...rest } = props;\n    const { type: _type, ref: innerRef, ...linkProps } = useLinkProps(rest, ref);\n    const children = typeof rest.children === \"function\" ? rest.children({\n      isActive: linkProps[\"data-status\"] === \"active\"\n    }) : rest.children;\n    if (typeof _asChild === \"undefined\") {\n      delete linkProps.disabled;\n    }\n    return React.createElement(\n      _asChild ? _asChild : \"a\",\n      {\n        ...linkProps,\n        ref: innerRef\n      },\n      children\n    );\n  }\n);\nfunction isCtrlEvent(e) {\n  return !!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey);\n}\nconst linkOptions = (options) => {\n  return options;\n};\nexport {\n  Link,\n  createLink,\n  linkOptions,\n  useLinkProps\n};\n//# sourceMappingURL=link.js.map\n"],"names":["preloadWarning","useLinkProps","options","forwardedRef","router","useRouter","isTransitioning","setIsTransitioning","React.useState","hasRenderFetched","React.useRef","innerRef","useForwardedRef","activeProps","inactiveProps","activeOptions","to","userPreload","userPreloadDelay","replace","startTransition","resetScroll","viewTransition","children","target","disabled","style","className","onClick","onFocus","onMouseEnter","onMouseLeave","onTouchStart","ignoreBlocker","rest","_params","_search","_hash","_state","_mask","propsSafeToSpread","type","React.useMemo","currentSearch","useRouterState","s","next","preload","preloadDelay","isActive","exactPathTest","currentPathSplit","removeTrailingSlash","d","i","deepEqual","doPreload","React.useCallback","err","preloadViewportIoCallback","entry","useIntersectionObserver","useLayoutEffect","handleClick","isCtrlEvent","flushSync","unsub","handleFocus","_","handleTouchStart","handleEnter","eventTarget","handleLeave","composeHandlers","handlers","e","_a","handler","resolvedActiveProps","functionalUpdate","resolvedInactiveProps","resolvedClassName","resolvedStyle","Link","React.forwardRef","props","ref","_asChild","_type","linkProps","React.createElement"],"mappings":"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","x_google_ignoreList":[0]}
import{r as o,aH as ne,aI as se,aJ as q,aK as oe,aL as z,aM as le,aN as ie,aO as ce,aP as A,aq as ue}from"./index-CZHDJBCk.js";const de="Error preloading route! ☝️";function fe(r,v){const t=ne(),[c,m]=o.useState(!1),p=o.useRef(!1),l=se(v),{activeProps:y=()=>({className:"active"}),inactiveProps:O=()=>({}),activeOptions:s,to:T,preload:M,preloadDelay:U,replace:B,startTransition:j,resetScroll:J,viewTransition:V,children:w,target:d,disabled:n,style:b,className:P,onClick:g,onFocus:k,onMouseEnter:S,onMouseLeave:x,onTouchStart:E,ignoreBlocker:W,...$}=r,{params:pe,search:ve,hash:me,state:ye,mask:Te,...I}=$,F=o.useMemo(()=>{try{return new URL(`${T}`),"external"}catch{}return"internal"},[T]),G=q({select:e=>e.location.search}),i=o.useMemo(()=>t.buildLocation(r),[t,r,G]),f=o.useMemo(()=>M??t.options.defaultPreload,[t.options.defaultPreload,M]),Q=U??t.options.defaultPreloadDelay??0,L=q({select:e=>{if(s!=null&&s.exact){if(!oe(e.location.pathname,i.pathname,t.basepath))return!1}else{const a=z(e.location.pathname,t.basepath).split("/");if(!z(i.pathname,t.basepath).split("/").every((ae,re)=>ae===a[re]))return!1}return((s==null?void 0:s.includeSearch)??!0)&&!le(e.location.search,i.search,{partial:!(s!=null&&s.exact),ignoreUndefined:!(s!=null&&s.explicitUndefined)})?!1:s!=null&&s.includeHash?e.location.hash===i.hash:!0}}),u=o.useCallback(()=>{t.preloadRoute(r).catch(e=>{console.warn(e),console.warn(de)})},[r,t]),X=o.useCallback(e=>{e!=null&&e.isIntersecting&&u()},[u]);if(ie(l,X,{rootMargin:"100px"},{disabled:!!n||f!=="viewport"}),ce(()=>{p.current||!n&&f==="render"&&(u(),p.current=!0)},[n,u,f]),F==="external")return{...I,ref:l,type:F,href:T,...w&&{children:w},...d&&{target:d},...n&&{disabled:n},...b&&{style:b},...P&&{className:P},...g&&{onClick:g},...k&&{onFocus:k},...S&&{onMouseEnter:S},...x&&{onMouseLeave:x},...E&&{onTouchStart:E}};const Y=e=>{if(!n&&!he(e)&&!e.defaultPrevented&&(!d||d==="_self")&&e.button===0){e.preventDefault(),ue.flushSync(()=>{m(!0)});const a=t.subscribe("onResolved",()=>{a(),m(!1)});t.buildAndCommitLocation({...r,replace:B,resetScroll:J,startTransition:j,viewTransition:V,ignoreBlocker:W})}},N=e=>{n||f&&u()},Z=N,ee=e=>{if(n)return;const a=e.target||{};if(f){if(a.preloadTimeout)return;a.preloadTimeout=setTimeout(()=>{a.preloadTimeout=null,u()},Q)}},te=e=>{if(n)return;const a=e.target||{};a.preloadTimeout&&(clearTimeout(a.preloadTimeout),a.preloadTimeout=null)},h=e=>a=>{var _;(_=a.persist)==null||_.call(a),e.filter(Boolean).forEach(K=>{a.defaultPrevented||K(a)})},R=L?A(y,{})??{}:{},C=L?{}:A(O,{}),D=[P,R.className,C.className].filter(Boolean).join(" "),H={...b,...R.style,...C.style};return{...I,...R,...C,href:n?void 0:i.maskedLocation?t.history.createHref(i.maskedLocation.href):t.history.createHref(i.href),ref:l,onClick:h([g,Y]),onFocus:h([k,N]),onMouseEnter:h([S,ee]),onMouseLeave:h([x,te]),onTouchStart:h([E,Z]),disabled:!!n,target:d,...Object.keys(H).length&&{style:H},...D&&{className:D},...n&&{role:"link","aria-disabled":!0},...L&&{"data-status":"active","aria-current":"page"},...c&&{"data-transitioning":"transitioning"}}}const Pe=o.forwardRef((r,v)=>{const{_asChild:t,...c}=r,{type:m,ref:p,...l}=fe(c,v),y=typeof c.children=="function"?c.children({isActive:l["data-status"]==="active"}):c.children;return typeof t>"u"&&delete l.disabled,o.createElement(t||"a",{...l,ref:p},y)});function he(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}export{Pe as L};
//# sourceMappingURL=link-8B-EtKzV.js.map

import{j as e,B as i,p as P,y as W,R as n,z as j}from"./index-DoHIwt5e.js";import{C as I,E as X,k as Y,u as Z,g as ee,b as te,c as se,d as ae,e as le,f as re,T as u,h as ne,i as M,j as f,a as g}from"./checkbox-Bdxr5jfI.js";import{I as oe}from"./index-DXxv6v3I.js";import{D as R,a as k,b as F,c as ie,f as b,d as ce,i as de}from"./dropdown-menu-BRJYmod9.js";import{S as me,a as ue,b as ge,c as he,d as C}from"./select-BrlF3Ifh.js";import{B as w}from"./badge-C1zNXNx4.js";import{a as xe,g as pe}from"./problemApi-CccVGkm-.js";import{A as je}from"./arrow-up-down-H0KXQ5it.js";import{C as fe}from"./circle-plus-BsEmdQiN.js";import"./axios-C9YbA6xv.js";import"./index-BLMJFQ5A.js";import"./index-mnJ_QENl.js";import"./axios-BzDuykoy.js";import"./js.cookie-Cz0CWeBA.js";const c=Y(),h=[c.display({id:"select",header:({table:l})=>e.jsx(I,{checked:l.getIsAllPageRowsSelected(),onCheckedChange:s=>l.toggleAllPageRowsSelected(!!s),"aria-label":"Select all"}),cell:({row:l})=>e.jsx(I,{checked:l.getIsSelected(),onCheckedChange:s=>l.toggleSelected(!!s),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1}),c.accessor("title",{header:({column:l})=>e.jsxs(i,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),className:"font-bold",children:["Title",e.jsx(je,{className:"ml-2 h-4 w-4"})]})}),c.accessor("difficulty",{header:"Difficulty",cell:({row:l})=>{const s=l.getValue("difficulty");return e.jsx(w,{variant:s==="Easy"?"success":s==="Medium"?"warning":"destructive",children:s})}}),c.accessor("acceptance",{header:"Acceptance",cell:({row:l})=>{const s=l.getValue("acceptance");return s===-1?e.jsx("span",{className:"text-muted-foreground",children:"No data"}):e.jsxs(w,{variant:"secondary",children:[s.toFixed(1),"%"]})}}),c.accessor("isActive",{header:"Status",cell:({row:l})=>{const s=l.getValue("isActive");return e.jsx(w,{variant:s?"success":"secondary",children:s?"Active":"Inactive"})}}),c.display({id:"actions",cell:({row:l})=>{const s=l.original,x=P();return e.jsxs(R,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(i,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(X,{className:"h-4 w-4"})]})}),e.jsxs(F,{align:"end",children:[e.jsx(ie,{children:"Actions"}),e.jsx(b,{onClick:()=>navigator.clipboard.writeText(s.problemsId),children:"Copy problem ID"}),e.jsx(ce,{}),e.jsx(b,{onClick:()=>x({to:"/update-problem/$problemId",params:{problemId:s.problemsId}}),children:"Edit problem"}),e.jsx(b,{onClick:()=>xe(s.problemsId),children:"Delete problem"})]})]})}})];function be(){var N,y;const l=W({from:"/problem-table"}),s=P(),x=n.useMemo(()=>{try{return l.page?parseInt(l.page):1}catch(a){return console.error("Error parsing page from URL:",a),1}},[l.page]),[D,A]=n.useState([]),[d,p]=n.useState(!0),[S,T]=n.useState(null),[v,V]=n.useState(0),[E,z]=n.useState([]),[H,B]=n.useState([]),[L,U]=n.useState({}),[$,O]=n.useState({}),[o,_]=n.useState({pageIndex:x-1,pageSize:3});n.useEffect(()=>{(async()=>{try{p(!0);const t=await pe(o.pageIndex+1,o.pageSize);console.log(t),A(t.problems.data),V(t.problems.count),p(!1)}catch(t){console.error("Error fetching data: ",t),T("An error occurred while fetching data. Please try again later."),p(!1)}})()},[o.pageIndex,o.pageSize]),n.useEffect(()=>{s({search:a=>({...a,page:o.pageIndex+1})},{replace:!0})},[o.pageIndex,s]);const q=()=>{s({to:"/create-problem"})},r=Z({data:D,columns:h,pageCount:Math.ceil(v/o.pageSize),onSortingChange:z,onColumnFiltersChange:B,getCoreRowModel:ee(),getPaginationRowModel:te(),getSortedRowModel:se(),getFilteredRowModel:ae(),onColumnVisibilityChange:U,onRowSelectionChange:O,onPaginationChange:_,state:{sorting:E,columnFilters:H,columnVisibility:L,rowSelection:$,pagination:o},manualPagination:!0}),G=r.getState().columnFilters.length>0,J=n.useCallback(()=>{r.resetColumnFilters()},[r]),K=()=>{var a;return d?e.jsx(f,{children:[...Array(o.pageSize)].map((t,m)=>e.jsx(u,{children:h.map((Ce,Q)=>e.jsx(g,{children:e.jsx(j,{className:"h-6 w-full"})},Q))},m))}):S?e.jsx(f,{children:e.jsx(u,{children:e.jsxs(g,{colSpan:h.length,className:"h-24 text-center",children:["Error: ",S]})})}):e.jsx(f,{children:(a=r.getRowModel().rows)!=null&&a.length?r.getRowModel().rows.map(t=>e.jsx(u,{"data-state":t.getIsSelected()&&"selected",children:t.getVisibleCells().map(m=>e.jsx(g,{children:M(m.column.columnDef.cell,m.getContext())},m.id))},t.id)):e.jsx(u,{children:e.jsx(g,{colSpan:h.length,className:"h-24 text-center",children:"No results."})})})};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Problems"}),e.jsxs(i,{onClick:q,className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5"}),"Add New Problem"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center py-4 gap-2",children:[e.jsx(oe,{placeholder:"Filter titles...",value:((N=r.getColumn("title"))==null?void 0:N.getFilterValue())??"",onChange:a=>{var t;return(t=r.getColumn("title"))==null?void 0:t.setFilterValue(a.target.value)},className:"max-w-sm"}),e.jsxs(me,{value:((y=r.getColumn("difficulty"))==null?void 0:y.getFilterValue())??"",onValueChange:a=>{var t;return(t=r.getColumn("difficulty"))==null?void 0:t.setFilterValue(a)},children:[e.jsx(ue,{className:"w-[180px]",children:e.jsx(ge,{placeholder:"Select difficulty"})}),e.jsxs(he,{children:[e.jsx(C,{value:"Easy",children:"Easy"}),e.jsx(C,{value:"Medium",children:"Medium"}),e.jsx(C,{value:"Hard",children:"Hard"})]})]}),G&&e.jsx(i,{onClick:J,variant:"outline",size:"sm",children:"Clear Filters"}),e.jsxs(R,{children:[e.jsx(k,{asChild:!0,children:e.jsx(i,{variant:"outline",className:"ml-auto",children:"Columns"})}),e.jsx(F,{align:"end",children:r.getAllColumns().filter(a=>a.getCanHide()).map(a=>e.jsx(de,{className:"capitalize",checked:a.getIsVisible(),onCheckedChange:t=>a.toggleVisibility(!!t),children:a.id},a.id))})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(le,{children:[e.jsx(re,{children:r.getHeaderGroups().map(a=>e.jsx(u,{children:a.headers.map(t=>e.jsx(ne,{className:"font-bold",children:t.isPlaceholder?null:M(t.column.columnDef.header,t.getContext())},t.id))},a.id))}),K()]})}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsx("div",{className:"flex-1 text-sm text-muted-foreground",children:d?e.jsx(j,{className:"h-4 w-[250px]"}):`${r.getFilteredSelectedRowModel().rows.length} of ${v} row(s) selected.`}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>r.previousPage(),disabled:!r.getCanPreviousPage()||d,children:"Previous"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-primary text-sm font-medium text-primary-foreground",children:d?e.jsx(j,{className:"h-4 w-4"}):r.getState().pagination.pageIndex+1})}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>r.nextPage(),disabled:!r.getCanNextPage()||d,children:"Next"})]})]})]})}function Ve(){return e.jsx("div",{className:"container mx-auto py-10 px-4",children:e.jsx(be,{})})}export{Ve as default};
//# sourceMappingURL=ProblemTable-CG5HASml.js.map

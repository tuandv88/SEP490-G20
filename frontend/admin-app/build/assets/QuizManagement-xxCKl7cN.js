import{r as d,j as e,aa as ae,J as v,y as z,z as U,A as W,B as $,a1 as ve,ae as ye,u as Ce,W as be,N as k}from"./index-CZHDJBCk.js";import{S as J,A as we,b as qe,c as Te,d as Ae,e as Se,f as Oe,g as Ee,h as ke}from"./alert-dialog-B_LYbhSY.js";import{u as le,b as ce,C as m}from"./index.esm-BBIM_QSt.js";import{o as K,s as Z,b as ee,e as se,n as oe,a as de,t as me}from"./index-DGFZ-UbV.js";import{I as _}from"./index-CsZvwwPz.js";import{L as N}from"./label-990KbfKz.js";import{S as B,a as H,b as Y,c as X,d as M}from"./select-DvMDIVW3.js";import{D as ue,a as xe,b as he,c as pe,d as je}from"./dialog-BCM82MyM.js";import{c as Qe,u as Fe,A as Ie,a as Me,b as Le,I as Re,d as Pe,e as De,g as ze,f as Ue}from"./accordion-BxjINg0l.js";import{u as ne}from"./use-toast-DxaFKq84.js";import{T as te}from"./trash-2-1S-F7nOg.js";import{P as ie}from"./plus-CFaGAQ22.js";import{P as h}from"./index-CpqmcsmY.js";import{B as fe}from"./badge-DPmApw2E.js";import{T as Ve,a as $e,b as _e,c as Be}from"./tooltip-BaTE3lt9.js";import{e as He}from"./problemApi-DwmKlxuZ.js";import{C as Ye}from"./code-nd611ZK3.js";import{F as ge}from"./file-question-Bk9z1FEJ.js";import{S as re}from"./square-pen-CAbH_XzT.js";import{u as Xe}from"./store-McFJQSf3.js";import{C as Je}from"./chevron-left-CHgBgWnM.js";import{C as We}from"./clock-BnAYW0nh.js";import{R as Ge}from"./rotate-ccw-C2nTj3Mc.js";import"./index-Dg4EHzo4.js";import"./index-Btbx0t0H.js";import"./index-DQUYlbEB.js";import"./axios-OWqOmaEp.js";import"./axios-CCb-kr4I.js";const Ke=["MultipleChoice","MultipleSelect","TrueFalse"],Ze=["EASY","MEDIUM","HARD","EXPERT"],es=K({content:Z().min(1,"Content is required"),isActive:ee(),questionType:se(["MultipleChoice","MultipleSelect","TrueFalse","CodeSnippet"]),questionLevel:se(["EASY","MEDIUM","HARD","EXPERT"]),mark:oe().min(1,"Mark must be at least 1"),questionOptions:de(K({content:Z().min(1,"Option content is required"),isCorrect:ee()})).min(2,"At least two answer options are required").refine(i=>i.some(u=>u.isCorrect),{message:"At least one correct answer is required",path:["questionOptions"]})});function ss({onClose:i,quizId:u,setIsUpdate:w,isUpdate:L}){var Q;const[O,y]=d.useState("MultipleChoice"),{toast:p}=ne(),[n,q]=d.useState(!1),{control:c,handleSubmit:C,formState:{errors:a},watch:T,setValue:A,trigger:x}=le({resolver:me(es),defaultValues:{content:"",isActive:!0,questionType:"MultipleChoice",questionLevel:"EASY",mark:1,questionOptions:[{content:"",isCorrect:!0},{content:"",isCorrect:!1}]}}),{fields:E,append:R,remove:P}=ce({control:c,name:"questionOptions"}),j=T("questionType"),r=T("questionOptions");d.useEffect(()=>{if(j==="MultipleChoice"&&r.filter(s=>s.isCorrect).length>1){const s=r.findIndex(o=>o.isCorrect);r.forEach((o,l)=>{A(`questionOptions.${l}.isCorrect`,l===s)})}x("questionOptions")},[j,r,A,x]),d.useEffect(()=>{r&&(q(!1),x("questionOptions"))},[r,x]);const f=async t=>{if(q(!0),console.log("Form errors:",a),Object.keys(a).length>0)return;const s=t.questionOptions.map((l,g)=>({...l,orderIndex:g})),o={createQuestionDto:{...t,questionOptions:s}};try{await Qe(o,u),w(!L),p({title:"Success",description:"Question created successfully",duration:1500}),i()}catch(l){p({title:"Error",description:l.message,variant:"destructive",duration:1500})}};return e.jsx(ue,{open:!0,onOpenChange:i,children:e.jsxs(xe,{className:"max-w-[500px] h-[600px] p-0 overflow-hidden flex flex-col",children:[e.jsx(he,{className:"px-6 py-4 border-b",children:e.jsx(pe,{className:"text-xl font-semibold",children:"Add New Question"})}),e.jsx(ae,{className:"flex-grow px-6 py-4",children:e.jsxs("form",{onSubmit:C(f),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"content",children:"Question Content"}),e.jsx(m,{name:"content",control:c,render:({field:t})=>e.jsx(_,{id:"content",...t,placeholder:"Enter your question here"})}),n&&a.content&&e.jsx("p",{className:"text-sm text-red-500",children:a.content.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{name:"isActive",control:c,render:({field:t})=>e.jsx(J,{id:"isActive",checked:t.value,onCheckedChange:t.onChange})}),e.jsx(N,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"questionType",children:"Question Type"}),e.jsx(m,{name:"questionType",control:c,render:({field:t})=>e.jsxs(B,{onValueChange:s=>{t.onChange(s),y(s)},value:t.value,children:[e.jsx(H,{id:"questionType",children:e.jsx(Y,{placeholder:"Select type"})}),e.jsx(X,{children:Ke.map(s=>e.jsx(M,{value:s,children:s},s))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"questionLevel",children:"Difficulty Level"}),e.jsx(m,{name:"questionLevel",control:c,render:({field:t})=>e.jsxs(B,{onValueChange:t.onChange,value:t.value,children:[e.jsx(H,{id:"questionLevel",children:e.jsx(Y,{placeholder:"Select level"})}),e.jsx(X,{children:Ze.map(s=>e.jsx(M,{value:s,children:s.charAt(0)+s.slice(1).toLowerCase()},s))})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"mark",children:"Mark"}),e.jsx(m,{name:"mark",control:c,render:({field:t})=>e.jsx(_,{id:"mark",type:"number",...t,onChange:s=>t.onChange(parseInt(s.target.value)),min:1})}),n&&a.mark&&e.jsx("p",{className:"text-sm text-red-500",children:a.mark.message})]}),(O==="MultipleChoice"||O==="MultipleSelect")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Answer Options"}),e.jsx("div",{className:"max-h-[200px] overflow-y-auto pr-2",children:E.map((t,s)=>{var o,l;return e.jsxs("div",{className:"flex flex-col gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{name:`questionOptions.${s}.content`,control:c,render:({field:g})=>e.jsx(_,{...g,placeholder:`Option ${s+1}`,className:"flex-1"})}),e.jsx(m,{name:`questionOptions.${s}.isCorrect`,control:c,render:({field:{value:g,onChange:V}})=>e.jsx(J,{checked:g,onCheckedChange:F=>{O==="MultipleChoice"&&F?r.forEach((G,I)=>{A(`questionOptions.${I}.isCorrect`,I===s)}):V(F),x("questionOptions")},className:"mx-2"})}),e.jsx(v,{type:"button",variant:"ghost",size:"icon",onClick:()=>P(s),className:"h-8 w-8",disabled:E.length<=2,children:e.jsx(te,{className:"h-4 w-4"})})]}),n&&((l=(o=a.questionOptions)==null?void 0:o[s])==null?void 0:l.content)&&e.jsx("p",{className:"text-sm text-red-500",children:a.questionOptions[s].content.message})]},t.id)})}),n&&a.questionOptions&&"root"in a.questionOptions&&e.jsx("p",{className:"text-sm text-red-500",children:(Q=a.questionOptions.root)==null?void 0:Q.message}),e.jsxs(v,{type:"button",onClick:()=>R({content:"",isCorrect:!1}),variant:"outline",className:"w-full mt-2",children:[e.jsx(ie,{className:"h-4 w-4 mr-2 mt-1"}),"Add Answer Option"]})]}),j==="TrueFalse"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Correct Answer"}),e.jsx(m,{name:"questionOptions",control:c,defaultValue:[{content:"True",isCorrect:!0},{content:"False",isCorrect:!1}],render:({field:t})=>e.jsxs(B,{onValueChange:s=>t.onChange([{content:"True",isCorrect:s==="True"},{content:"False",isCorrect:s==="False"}]),defaultValue:"True",children:[e.jsx(H,{children:e.jsx(Y,{placeholder:"Select correct answer"})}),e.jsxs(X,{children:[e.jsx(M,{value:"True",children:"True"}),e.jsx(M,{value:"False",children:"False"})]})]})})]})]})}),e.jsx(je,{className:"px-6 py-4 border-t",children:e.jsxs("div",{className:"flex justify-end space-x-2 w-full",children:[e.jsx(v,{variant:"outline",onClick:i,children:"Cancel"}),e.jsx(v,{onClick:()=>{q(!0),C(f)()},children:"Add Question"})]})})]})})}const ts=["MultipleChoice","MultipleSelect","TrueFalse"],ns=["EASY","MEDIUM","HARD","EXPERT"],is=K({content:Z().min(1,"Content is required"),isActive:ee(),questionType:se(["MultipleChoice","MultipleSelect","TrueFalse","CodeSnippet"]),questionLevel:se(["EASY","MEDIUM","HARD","EXPERT"]),mark:oe().min(1,"Mark must be at least 1"),questionOptions:de(K({content:Z().min(1,"Option content is required"),isCorrect:ee()})).min(2,"At least two answer options are required").refine(i=>i.some(u=>u.isCorrect),{message:"At least one correct answer is required",path:["questionOptions"]})});function rs({quizId:i,question:u,onSave:w,onCancel:L}){var Q;const{toast:O}=ne(),[y,p]=d.useState(!1),[n,q]=d.useState(!1),{control:c,handleSubmit:C,formState:{errors:a},watch:T,setValue:A,trigger:x}=le({resolver:me(is),defaultValues:{...u,questionOptions:u.questionOptions.map(t=>({content:t.content,isCorrect:t.isCorrect}))}}),{fields:E,append:R,remove:P}=ce({control:c,name:"questionOptions"}),j=T("questionType"),r=T("questionOptions");d.useEffect(()=>{if(j==="MultipleChoice"&&r.filter(s=>s.isCorrect).length>1){const s=r.findIndex(o=>o.isCorrect);r.forEach((o,l)=>{A(`questionOptions.${l}.isCorrect`,l===s)})}x("questionOptions")},[j,r,A,x]),d.useEffect(()=>{r&&(p(!1),x("questionOptions"))},[r,x]);const f=async t=>{if(p(!0),Object.keys(a).length>0)return;q(!0);const s=t.questionOptions.map((l,g)=>({id:l.id,content:l.content,isCorrect:l.isCorrect,orderIndex:g})),o={question:{isActive:t.isActive,content:t.content,questionType:t.questionType,questionLevel:t.questionLevel,mark:t.mark,problemId:u.problemId,problem:u.problem,questionOptions:s}};try{const l=await Fe(i,u.id,o);O({title:"Success",description:"Question updated successfully",duration:1500}),w(l)}catch(l){O({title:"Error",description:l.message||"Failed to update question",variant:"destructive",duration:1500})}finally{q(!1)}};return e.jsx(ue,{open:!0,onOpenChange:L,children:e.jsxs(xe,{className:"max-w-[500px] h-[600px] p-0 overflow-hidden flex flex-col",children:[e.jsx(he,{className:"px-6 py-4 border-b",children:e.jsx(pe,{className:"text-xl font-semibold",children:"Edit Question"})}),e.jsx(ae,{className:"flex-grow px-6 py-4",children:e.jsxs("form",{onSubmit:C(f),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"content",children:"Question Content"}),e.jsx(m,{name:"content",control:c,render:({field:t})=>e.jsx(_,{id:"content",...t,placeholder:"Enter your question here"})}),y&&a.content&&e.jsx("p",{className:"text-sm text-red-500",children:a.content.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{name:"isActive",control:c,render:({field:t})=>e.jsx(J,{id:"isActive",checked:t.value,onCheckedChange:t.onChange})}),e.jsx(N,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"questionType",children:"Question Type"}),e.jsx(m,{name:"questionType",control:c,render:({field:t})=>e.jsxs(B,{onValueChange:t.onChange,value:t.value,children:[e.jsx(H,{id:"questionType",children:e.jsx(Y,{placeholder:"Select type"})}),e.jsx(X,{children:ts.map(s=>e.jsx(M,{value:s,children:s},s))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"questionLevel",children:"Difficulty Level"}),e.jsx(m,{name:"questionLevel",control:c,render:({field:t})=>e.jsxs(B,{onValueChange:t.onChange,value:t.value,children:[e.jsx(H,{id:"questionLevel",children:e.jsx(Y,{placeholder:"Select level"})}),e.jsx(X,{children:ns.map(s=>e.jsx(M,{value:s,children:s.charAt(0)+s.slice(1).toLowerCase()},s))})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"mark",children:"Mark"}),e.jsx(m,{name:"mark",control:c,render:({field:t})=>e.jsx(_,{id:"mark",type:"number",...t,onChange:s=>t.onChange(parseInt(s.target.value)),min:1})}),y&&a.mark&&e.jsx("p",{className:"text-sm text-red-500",children:a.mark.message})]}),(j==="MultipleChoice"||j==="MultipleSelect")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Answer Options"}),e.jsx("div",{className:"max-h-[200px] overflow-y-auto pr-2",children:E.map((t,s)=>{var o,l;return e.jsxs("div",{className:"flex flex-col gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{name:`questionOptions.${s}.content`,control:c,render:({field:g})=>e.jsx(_,{...g,placeholder:`Option ${s+1}`,className:"flex-1"})}),e.jsx(m,{name:`questionOptions.${s}.isCorrect`,control:c,render:({field:{value:g,onChange:V}})=>e.jsx(J,{checked:g,onCheckedChange:F=>{j==="MultipleChoice"&&F?r.forEach((G,I)=>{A(`questionOptions.${I}.isCorrect`,I===s)}):V(F),x("questionOptions")},className:"mx-2"})}),e.jsx(v,{type:"button",variant:"ghost",size:"icon",onClick:()=>P(s),className:"h-8 w-8",disabled:E.length<=2,children:e.jsx(te,{className:"h-4 w-4"})})]}),y&&((l=(o=a.questionOptions)==null?void 0:o[s])==null?void 0:l.content)&&e.jsx("p",{className:"text-sm text-red-500",children:a.questionOptions[s].content.message})]},t.id)})}),y&&a.questionOptions&&"root"in a.questionOptions&&e.jsx("p",{className:"text-sm text-red-500",children:(Q=a.questionOptions.root)==null?void 0:Q.message}),e.jsxs(v,{type:"button",onClick:()=>R({content:"",isCorrect:!1}),variant:"outline",className:"w-full mt-2",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Add Answer Option"]})]}),j==="TrueFalse"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Correct Answer"}),e.jsx(m,{name:"questionOptions",control:c,defaultValue:[{content:"True",isCorrect:!0},{content:"False",isCorrect:!1}],render:({field:t})=>e.jsxs(B,{onValueChange:s=>t.onChange([{content:"True",isCorrect:s==="True"},{content:"False",isCorrect:s==="False"}]),defaultValue:"True",children:[e.jsx(H,{children:e.jsx(Y,{placeholder:"Select correct answer"})}),e.jsxs(X,{children:[e.jsx(M,{value:"True",children:"True"}),e.jsx(M,{value:"False",children:"False"})]})]})})]})]})}),e.jsxs(je,{className:"px-6 py-4 border-t",children:[e.jsx(v,{variant:"outline",onClick:L,disabled:n,children:"Cancel"}),e.jsx(v,{onClick:()=>{p(!0),C(f)()},disabled:n,children:n?"Updating...":"Update Question"})]})]})})}function Ne({question:i,onEdit:u,onDelete:w,onToggleActive:L,quizId:O}){const[y,p]=d.useState(!1),[n,q]=d.useState(null),[c,C]=d.useState(!1);d.useEffect(()=>{i.questionType==="CodeSnippet"&&i.problemId&&(async()=>{try{const f=await He(i.problemId);q(f)}catch(f){console.error("Error fetching problem details:",f)}})()},[i.questionType,i.problemId]);const a=()=>{p(!0)},T=r=>{u(r),p(!1)},A=()=>{C(!0)},x=()=>{w(i.id),C(!1)},E=()=>{C(!1)},R=()=>{console.log("Editing problem:",n.id)},P=()=>{console.log("Deleting problem:",n.id)},j=r=>{switch(r){case"CodeSnippet":return"bg-blue-100 text-blue-800 border-blue-300";case"MultipleChoice":return"bg-green-100 text-green-800 border-green-300";case"TrueFalse":return"bg-red-100 text-red-800 border-red-300";case"MultipleSelect":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return e.jsxs(e.Fragment,{children:[e.jsxs(z,{className:"mb-4 overflow-hidden",children:[e.jsx(U,{className:"space-y-0 pb-2",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[i.questionType==="CodeSnippet"?e.jsx(Ye,{className:"h-5 w-5 text-blue-500 flex-shrink-0"}):e.jsx(ge,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),e.jsx(W,{className:"text-base sm:text-lg font-semibold line-clamp-2",children:i.content})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{children:e.jsxs($e,{children:[e.jsx(_e,{asChild:!0,children:e.jsx(fe,{variant:i.isActive?"outline":"destructive",className:"text-xs",children:i.isActive?"Active":"Inactive"})}),e.jsx(Be,{children:e.jsx("p",{children:"Question status"})})]})}),e.jsx(v,{variant:"ghost",size:"icon",onClick:a,"aria-label":"Edit question",children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(v,{variant:"ghost",size:"icon",onClick:A,"aria-label":"Delete question",children:e.jsx(te,{className:"h-4 w-4"})})]})]})}),e.jsxs($,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${j(i.questionType)}`,children:i.questionType}),e.jsxs("div",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-white-100 text-purple-800 border border-purple-300",children:["Level: ",i.questionLevel]}),e.jsxs("div",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-800 border border-orange-300",children:["Mark: ",i.mark]})]}),e.jsx(Ie,{type:"single",collapsible:!0,className:"w-full",children:e.jsxs(Me,{value:"details",children:[e.jsx(Le,{className:"text-sm font-medium",children:e.jsxs("span",{className:"flex items-center",children:["View Details",e.jsx(Re,{className:"ml-2 h-4 w-4 text-muted-foreground"})]})}),e.jsxs(Pe,{children:[i.questionType==="CodeSnippet"&&n&&e.jsx(z,{className:"mt-2 mb-4 bg-muted",children:e.jsxs(U,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0 pb-2",children:[e.jsxs(W,{className:"text-sm font-medium",children:["Problem: ",n.problemDto.title]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(v,{variant:"ghost",size:"sm",onClick:R,className:"h-8",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(v,{variant:"ghost",size:"sm",onClick:P,className:"h-8",children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})}),i.questionType!=="CodeSnippet"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Answers:"}),e.jsx("ul",{className:"space-y-1",children:i.questionOptions.map((r,f)=>e.jsxs("li",{className:`flex items-center space-x-2 ${r.isCorrect?"text-green-600":""}`,children:[e.jsx("span",{children:r.isCorrect?"✓":"○"}),e.jsx("span",{className:"text-sm",children:r.content})]},f))})]})]})]})})]})]}),y&&e.jsx(rs,{quizId:O,question:i,onSave:T,onCancel:()=>p(!1)}),e.jsx(we,{open:c,onOpenChange:C,children:e.jsxs(qe,{children:[e.jsxs(Te,{children:[e.jsx(Ae,{children:"Are you sure you want to delete this question?"}),e.jsx(Se,{children:"This action cannot be undone. This will permanently delete the question and remove it from the quiz."})]}),e.jsxs(Oe,{children:[e.jsx(Ee,{onClick:E,children:"Cancel"}),e.jsx(ke,{onClick:x,children:"Delete"})]})]})})]})}Ne.propTypes={question:h.shape({id:h.string.isRequired,content:h.string.isRequired,isActive:h.bool.isRequired,questionType:h.string.isRequired,questionLevel:h.string.isRequired,mark:h.number.isRequired,questionOptions:h.arrayOf(h.shape({content:h.string.isRequired,isCorrect:h.bool.isRequired})).isRequired,problemId:h.string}).isRequired,onEdit:h.func.isRequired,onDelete:h.func.isRequired,onToggleActive:h.func.isRequired};function Is(){var r,f,Q,t,s,o,l,g,V,F,G,I;const{params:i}=ve(ye.id),{courseIdToBack:u}=Xe(),{quizId:w}=i,[L,O]=d.useState(!1),[y,p]=d.useState(!1),[n,q]=d.useState(null),[c,C]=d.useState(!0),a=Ce(),{toast:T}=ne(),[A,x]=d.useState(!1);d.useEffect(()=>{(async()=>{C(!0);try{const b=await ze(w);q(b),console.log(b)}catch(b){console.error("Error fetching quiz detail:",b),T({title:"Error",description:"Failed to load quiz details. Please try again.",variant:"destructive"})}finally{C(!1)}})()},[w,y,T]);const E=S=>{q(b=>({...b,quiz:{...b.quiz,questions:b.quiz.questions.map(D=>D.id===S.id?S:D)}})),p(!y)},R=async S=>{try{await Ue(w,S),p(!y),T({title:"Success",description:"Question deleted successfully",duration:1500})}catch{T({title:"Error",description:"Failed to delete question. Please try again.",variant:"destructive",duration:1500})}},P=S=>{q(b=>({...b,quiz:{...b.quiz,questions:b.quiz.questions.map(D=>D.id===S?{...D,isActive:!D.isActive}:D)}}))},j=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(k,{className:"h-10 w-40"}),e.jsxs(z,{children:[e.jsx(U,{children:e.jsx(k,{className:"h-8 w-3/4"})}),e.jsxs($,{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{className:"h-6 w-full"}),e.jsx(k,{className:"h-6 w-full"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{className:"h-6 w-full"}),e.jsx(k,{className:"h-6 w-full"})]})]})]}),e.jsxs(z,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between",children:[e.jsx(k,{className:"h-8 w-1/4"}),e.jsx(k,{className:"h-10 w-40"})]}),e.jsx($,{children:e.jsx("div",{className:"space-y-4",children:[1,2,3].map(S=>e.jsx(k,{className:"h-24 w-full"},S))})})]})]});return c?e.jsx("div",{className:"container mx-auto p-4 space-y-6",children:e.jsx(j,{})}):e.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[e.jsxs(v,{variant:"outline",className:"flex items-center gap-2",onClick:()=>a({to:be,params:{courseId:u}}),children:[e.jsx(Je,{className:"h-4 w-4"}),"Back to Curriculum"]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(z,{className:"w-full",children:[e.jsx(U,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{className:"text-2xl font-bold",children:(r=n==null?void 0:n.quiz)==null?void 0:r.title}),e.jsx(fe,{variant:(f=n==null?void 0:n.quiz)!=null&&f.isActive?"success":"secondary",children:(Q=n==null?void 0:n.quiz)!=null&&Q.isActive?"Active":"Inactive"})]})}),e.jsx($,{className:"pt-0",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted",children:e.jsx(ge,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Quiz Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(t=n==null?void 0:n.quiz)==null?void 0:t.quizType})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted",children:e.jsx(De,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Passing Mark"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(s=n==null?void 0:n.quiz)==null?void 0:s.passingMark,"%"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted",children:e.jsx(We,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Time Limit"}),((o=n==null?void 0:n.quiz)==null?void 0:o.hasTimeLimit)&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(l=n==null?void 0:n.quiz)==null?void 0:l.timeLimit," minutes"]})]})]}),e.jsx(J,{checked:(g=n==null?void 0:n.quiz)==null?void 0:g.hasTimeLimit})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted",children:e.jsx(Ge,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Attempt Limit"}),((V=n==null?void 0:n.quiz)==null?void 0:V.hasAttemptLimit)&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(F=n==null?void 0:n.quiz)==null?void 0:F.attemptLimit," attempts"]})]})]}),e.jsx(J,{checked:(G=n==null?void 0:n.quiz)==null?void 0:G.hasAttemptLimit})]})]})]})})]}),e.jsxs(z,{className:"md:col-span-2",children:[e.jsxs(U,{className:"flex flex-row items-center justify-between",children:[e.jsx(W,{children:"Questions"}),e.jsxs(v,{onClick:()=>O(!0),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Add Question"]})]}),e.jsx($,{children:e.jsx("div",{className:"space-y-4",children:((I=n==null?void 0:n.quiz)==null?void 0:I.questions.length)>0?n.quiz.questions.map(S=>e.jsx(Ne,{quizId:w,question:S,onEdit:E,onDelete:R,onToggleActive:P},S.id)):e.jsx("p",{className:"text-center text-muted-foreground",children:"No questions added yet."})})})]})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50",children:e.jsx("div",{className:"container flex items-center justify-center h-full max-w-lg mx-auto",children:e.jsxs(z,{className:"w-full",children:[e.jsx(U,{children:e.jsx(W,{children:"Add New Question"})}),e.jsx($,{children:e.jsx(ss,{quizId:w,setIsUpdate:p,isUpdate:y,onClose:()=>O(!1)})})]})})}),A&&e.jsx(FullScreenPopup,{isOpen:A,onClose:()=>x(!1),quizId:w})]})}export{Is as default};
//# sourceMappingURL=QuizManagement-xxCKl7cN.js.map

import{r as o,j as e,B as c,L as y}from"./index-DoHIwt5e.js";import{P as A}from"./page-container-CYVt9CDH.js";import{u as k,g as E,b as M,c as D,d as P,e as T,f as I,T as p,h as L,i as C,j as F,a as b,C as N,E as U}from"./checkbox-Bdxr5jfI.js";import{I as V}from"./index-DXxv6v3I.js";import{D as v,a as S,b as R,i as K,c as H,f as j,d as B}from"./dropdown-menu-BRJYmod9.js";import{A as _,a as z,b as $}from"./avatar-2L16wRWs.js";import{A as q}from"./arrow-up-down-H0KXQ5it.js";import{a as O}from"./js.cookie-Cz0CWeBA.js";import{a as G}from"./axios-C9YbA6xv.js";import{A as J,a as Q,b as W}from"./alert-CLuhy8yo.js";import"./sidebar-DD38i4-u.js";import"./index-LgyUAq2R.js";import"./tooltip-DVG0fl16.js";import"./index-BLMJFQ5A.js";import"./index-mnJ_QENl.js";function X({columns:t,data:s}){var n,w;const[d,h]=o.useState([]),[u,m]=o.useState([]),[g,i]=o.useState({}),[f,x]=o.useState({}),r=k({data:s,columns:t,onSortingChange:h,onColumnFiltersChange:m,getCoreRowModel:E(),getPaginationRowModel:M(),getSortedRowModel:D(),getFilteredRowModel:P(),onColumnVisibilityChange:i,onRowSelectionChange:x,state:{sorting:d,columnFilters:u,columnVisibility:g,rowSelection:f}});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(V,{placeholder:"Filter usernames...",value:((n=r.getColumn("userName"))==null?void 0:n.getFilterValue())??"",onChange:a=>{var l;return(l=r.getColumn("userName"))==null?void 0:l.setFilterValue(a.target.value)},className:"max-w-sm"}),e.jsxs(v,{children:[e.jsx(S,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"Columns"})}),e.jsx(R,{align:"end",children:r.getAllColumns().filter(a=>a.getCanHide()).map(a=>e.jsx(K,{className:"capitalize",checked:a.getIsVisible(),onCheckedChange:l=>a.toggleVisibility(!!l),children:a.id},a.id))})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(T,{children:[e.jsx(I,{children:r.getHeaderGroups().map(a=>e.jsx(p,{children:a.headers.map(l=>e.jsx(L,{children:l.isPlaceholder?null:C(l.column.columnDef.header,l.getContext())},l.id))},a.id))}),e.jsx(F,{children:(w=r.getRowModel().rows)!=null&&w.length?r.getRowModel().rows.map(a=>e.jsx(p,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(l=>e.jsx(b,{children:C(l.column.columnDef.cell,l.getContext())},l.id))},a.id)):e.jsx(p,{children:e.jsx(b,{colSpan:t.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[r.getFilteredSelectedRowModel().rows.length," of ",r.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>r.previousPage(),disabled:!r.getCanPreviousPage(),children:"Previous"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>r.nextPage(),disabled:!r.getCanNextPage(),children:"Next"})]})]})]})}const Y=[{id:"select",header:({table:t})=>e.jsx(N,{checked:t.getIsAllPageRowsSelected(),onCheckedChange:s=>t.toggleAllPageRowsSelected(!!s),"aria-label":"Select all"}),cell:({row:t})=>e.jsx(N,{checked:t.getIsSelected(),onCheckedChange:s=>t.toggleSelected(!!s),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"userName",header:({column:t})=>e.jsxs(c,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["Username",e.jsx(q,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"email",header:"Email"},{accessorKey:"fullName",header:"Full Name",cell:({row:t})=>{const s=t.original;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(_,{children:[e.jsx(z,{src:s.urlProfilePicture,alt:`${s.firstName} ${s.lastName}`}),e.jsxs($,{children:[s.firstName[0],s.lastName[0]]})]}),e.jsxs("span",{children:[s.firstName," ",s.lastName]})]})}},{accessorKey:"roles",header:"Roles",cell:({row:t})=>{const s=t.getValue("roles");return e.jsx("div",{children:s.join(", ")})}},{accessorKey:"isAccountLocked",header:"Account Status",cell:({row:t})=>{const s=t.getValue("isAccountLocked");return e.jsx("div",{className:s?"text-red-500":"text-green-500",children:s?"Locked":"Active"})}},{id:"actions",cell:({row:t})=>{const s=t.original;return e.jsxs(v,{children:[e.jsx(S,{asChild:!0,children:e.jsxs(c,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(U,{className:"h-4 w-4"})]})}),e.jsxs(R,{align:"end",children:[e.jsx(H,{children:"Actions"}),e.jsx(j,{onClick:()=>navigator.clipboard.writeText(s.id),children:"Copy user ID"}),e.jsx(B,{}),e.jsx(j,{children:"View user details"}),e.jsx(j,{children:"Edit user"}),e.jsx(j,{className:"text-red-600",children:"Delete user"})]})]})}}],Z="https://localhost:6005",ee=G.create({baseURL:Z,timeout:3e4,headers:{"Content-Type":"application/json"}}),se=async t=>{try{const s=O.get("authToken");if(!s)throw new Error("Không tìm thấy token xác thực");return(await ee.get("/users/alldetails",{headers:{Authorization:`Bearer ${s}`},signal:t})).data}catch(s){throw s.code==="ERR_CANCELED"?s:s.response?new Error(s.response.data.message||"Lỗi từ server"):s.request?new Error("Không nhận được phản hồi từ server"):new Error("Có lỗi xảy ra khi gửi yêu cầu")}};function te(){const[t,s]=o.useState([]),[d,h]=o.useState(!0),[u,m]=o.useState(null);return o.useEffect(()=>{const g=new AbortController,i=g.signal;return(async()=>{var x,r;try{h(!0),m(null);const n=await se(i);i.aborted||s(n)}catch(n){n.name==="CanceledError"||n.code==="ERR_CANCELED"?console.log("Request was canceled",n):m(((r=(x=n.response)==null?void 0:x.data)==null?void 0:r.message)||n.message||"Có lỗi xảy ra, vui lòng thử lại")}finally{i.aborted||h(!1)}})(),()=>{g.abort()}},[]),d?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(y,{className:"h-8 w-8 animate-spin"})}):u?e.jsxs(J,{variant:"destructive",children:[e.jsx(Q,{children:"Error"}),e.jsx(W,{children:u})]}):e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-5",children:"User Management"}),e.jsx(X,{columns:Y,data:t})]})}const re=[{label:"UserTable",href:"/user-table"}];function we(){return e.jsx(A,{breadcrumbs:re,children:e.jsx(te,{})})}export{we as default};
//# sourceMappingURL=UserTable-DY_LIHcs.js.map

import{p as we,j as e,r as c,B as j,L as le,e as ne,f as re,o as ke,d as ie,D as Fe,E as Le,F as Ee,R as H,n as Re,g as De,A as Pe}from"./index-DoHIwt5e.js";import{A as ce}from"./arrow-left-Col4KDBy.js";import{A as Me,C as ze,F as Ie,S as Ae}from"./ControlledAlertDialog-adDPAeYs.js";import{F as Be}from"./file-text-DdQafEJV.js";import{C as oe}from"./code-Bj18g6HZ.js";import{B as Oe}from"./book-open-DU-QPPBq.js";import{a as $e,u as Ve,F as He}from"./index.esm-DJd3S9K5.js";import{u as de}from"./use-toast-DbRgK7NN.js";import{a as f,b as v,c as g,d as N,e as C,M as Je}from"./markdown-form-field-Cwd5yOXl.js";import{I as y}from"./index-DXxv6v3I.js";import{S as X,a as Y,b as q,c as K,d as F}from"./select-BrlF3Ifh.js";import{S as Q}from"./alert-dialog-WSqYsHid.js";import{R as W,a as B,F as Z,b as ee,T as Ue,C as me,c as xe,P as _e,e as Ge,r as Xe,d as Ye}from"./TestResultLoading-vNs8iDy5.js";import{X as qe,T as se,a as te,b as V,c as ae,d as Ke,e as Qe,f as We}from"./tabs-DT8wMpmI.js";import{D as Ze,a as es,b as ss,f as ts}from"./dropdown-menu-BRJYmod9.js";import{T as as}from"./code-section-BKJxoo4G.js";import{f as ls}from"./toast-8OJ4HgwC.js";import{P as ns}from"./plus-D_d5tuOf.js";import{c as rs}from"./problemApi-CccVGkm-.js";import"./label-Dt3jQF_r.js";import"./index-CbyDAWoJ.js";import"./index-BLMJFQ5A.js";import"./axios-C9YbA6xv.js";import"./index-LgyUAq2R.js";import"./axios-BzDuykoy.js";import"./js.cookie-Cz0CWeBA.js";import"./index-mnJ_QENl.js";import"./textarea-v6B7CkTn.js";import"./badge-C1zNXNx4.js";function is({}){const t=we();return e.jsx("header",{className:"sticky top-0 left-0 right-0 bg-white border-b border-gray-200 z-1",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 h-14 flex items-center justify-between",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{className:"text-black flex items-center hover:text-purple-700",onClick:()=>t({to:"/problem-table"}),children:[e.jsx(ce,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:"Back To Problem List"})]})})})})}const M=[{id:"basic",label:"Basic Info",icon:Be},{id:"code",label:"Code",icon:oe},{id:"description",label:"Template",icon:Oe}];function cs({activeTab:t,setActiveTab:s,isSaveTemplate:r,isRunSuccess:o,isLoadingSubmit:d}){const n=M.findIndex(k=>k.id===t),u=n===M.length-1,p=n===0,[E,T]=c.useState(!1),b=()=>T(!0),L=()=>T(!1),h=()=>{L()},D=()=>{p||s(M[n-1].id)},m=()=>{u||s(M[n+1].id)};return e.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-white border-t border-gray-200",children:[e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs(j,{type:"button",variant:"ghost",onClick:D,disabled:p,className:"flex items-center",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Previous"]}),e.jsx("div",{className:"flex justify-center space-x-4",children:M.map(k=>{const z=k.icon;return e.jsxs("button",{type:"button",className:`
          flex flex-row items-center justify-center px-4 relative
          ${t===k.id?"text-purple-600":"text-gray-600 hover:text-gray-900"}
        `,children:[e.jsx(z,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"text-xs",children:k.label})]},k.id)})}),u&&e.jsx(e.Fragment,{children:d?e.jsx(e.Fragment,{children:e.jsxs(j,{type:"button",disabled:d,children:[e.jsx(le,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]})}):e.jsx(j,{disabled:r===!1,type:"submit",variant:"default",className:"flex items-center",children:"Submit"})}),!u&&e.jsxs(j,{type:"button",variant:"ghost",onClick:o===!1&&t==="code"?b:m,className:"flex items-center",children:["Next",e.jsx(Me,{className:"h-4 w-4 ml-2"})]})]})}),e.jsx(ze,{isOpen:E,onClose:L,onConfirm:h,title:"Check the code again!",description:"You need to run the code and test case successfully before coming to the next step."})]})}function os({form:t}){return e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("h1",{className:"mb-6 text-3xl font-semibold",children:"Create Code Problem - Basic Info"}),e.jsx("div",{className:"mb-6",children:e.jsx(f,{control:t.control,name:"title",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{className:"text-base font-semibold",children:"Title"}),e.jsx(N,{children:e.jsx(y,{placeholder:"Enter problem title",...s})}),e.jsx(C,{})]})})}),e.jsx(Je,{control:t.control,name:"description",label:"Description",placeholder:"Enter problem description"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsx(f,{control:t.control,name:"language",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{className:"text-base font-semibold",children:"Code Language"}),e.jsxs(X,{onValueChange:s.onChange,defaultValue:s.value||"Java",children:[e.jsx(N,{children:e.jsx(Y,{children:e.jsx(q,{placeholder:"Select a language"})})}),e.jsxs(K,{children:[e.jsx(F,{value:"Java",children:"Java"}),e.jsx(F,{value:"csharp",children:"C#"}),e.jsx(F,{value:"python",children:"Python"}),e.jsx(F,{value:"c",children:"C"}),e.jsx(F,{value:"cpp",children:"C++"})]})]}),e.jsx(C,{})]})}),e.jsx(f,{control:t.control,name:"difficultyType",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{className:"text-base font-semibold",children:"Difficulty Type"}),e.jsxs(X,{onValueChange:s.onChange,defaultValue:s.value||"Medium",children:[e.jsx(N,{children:e.jsx(Y,{children:e.jsx(q,{placeholder:"Select difficulty type"})})}),e.jsxs(K,{children:[e.jsx(F,{value:"Easy",children:"Easy"}),e.jsx(F,{value:"Medium",children:"Medium"}),e.jsx(F,{value:"Hard",children:"Hard"})]})]}),e.jsx(C,{})]})}),e.jsx(f,{control:t.control,name:"cpuTimeLimit",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{className:"text-base font-semibold",children:"CPU Time Limit"}),e.jsx(N,{children:e.jsx(y,{min:.1,max:20,type:"number",step:"0.1",placeholder:"Enter CPU Time Limit",...s,value:s.value||2})}),e.jsx(C,{})]})}),e.jsx(f,{control:t.control,name:"cpuExtraTime",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{className:"text-base font-semibold",children:"CPU Extra Time"}),e.jsx(N,{children:e.jsx(y,{min:0,max:5,type:"number",step:"0.1",placeholder:"Enter CPU Extra Time",...s,value:s.value||2.5})}),e.jsx(C,{})]})}),e.jsx(f,{control:t.control,name:"memoryLimit",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{className:"text-base font-semibold",children:"Memory Limit (MB)"}),e.jsx(N,{children:e.jsx(y,{min:50,max:500,type:"number",step:"1",placeholder:"Enter Memory Limit",...s,value:s.value||250})}),e.jsx(C,{})]})}),e.jsx(f,{control:t.control,name:"stackLimit",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{className:"text-base font-semibold",children:"Stack Limit (MB)"}),e.jsx(N,{children:e.jsx(y,{min:30,max:125,type:"number",step:"1",placeholder:"Enter Stack Limit",...s,value:s.value||64})}),e.jsx(C,{})]})}),e.jsx(f,{control:t.control,name:"maxThread",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{className:"text-base font-semibold",children:"Max Thread"}),e.jsx(N,{children:e.jsx(y,{min:20,max:120,type:"number",step:"0.1",placeholder:"Enter Max Thread",...s,value:s.value||70})}),e.jsx(C,{})]})}),e.jsx(f,{control:t.control,name:"maxFileSize",render:({field:s})=>e.jsxs(v,{children:[e.jsx(g,{className:"text-base font-semibold",children:"Max File Size (MB)"}),e.jsx(N,{children:e.jsx(y,{min:1,max:20,type:"number",step:"1",placeholder:"Enter Max File Size",...s,value:s.value||10})}),e.jsx(C,{})]})}),e.jsx("div",{}),e.jsx(f,{control:t.control,name:"enableNetwork",render:({field:s})=>e.jsxs(v,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"text-base font-semibold",children:"Enable Network"}),e.jsx(N,{children:e.jsx(Q,{className:"ml-2",checked:s.value,defaultChecked:!1,onCheckedChange:s.onChange})})]}),e.jsx(C,{})]})}),e.jsx(f,{control:t.control,name:"isActive",render:({field:s})=>e.jsxs(v,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"text-base font-semibold",children:"Is Active"}),e.jsx(N,{children:e.jsx(Q,{className:"ml-2",checked:s.value,defaultChecked:!0,onCheckedChange:s.onChange})})]}),e.jsx(C,{})]})})]})]})}const ds=({testCases:t,selectedIndex:s,onSelect:r,failedTestCases:o=[]})=>e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:t.map((d,n)=>e.jsxs(j,{type:"button",variant:s===n?"default":"outline",className:`${o.includes(n)?"bg-red-100 hover:bg-red-200 text-red-700":"bg-emerald-100 hover:bg-emerald-200 text-emerald-700"} ${s===n?"border-2 border-emerald-500":""}`,onClick:()=>r(n),children:["Case ",n+1]},n))}),ms=({result:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Inputs:"}),Object.entries(t.inputs).map(([s,r])=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s," ="]}),e.jsx(y,{className:"font-mono bg-muted",value:r,readOnly:!0})]},s))]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Expected Output ="}),e.jsx(y,{className:"font-mono bg-muted",value:t.expected,readOnly:!0})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Actual Output ="}),e.jsx(y,{className:"font-mono bg-muted",value:t.output,readOnly:!0})]}),e.jsxs("div",{className:`flex items-center gap-2 ${t.isPass?"text-green-600":"text-red-600"}`,children:[t.isPass?e.jsx(xe,{className:"w-5 h-5"}):e.jsx(me,{className:"w-5 h-5"}),e.jsx("span",{children:t.isPass?"Passed":"Failed"})]})]})]}),xs=({solutions:t,selectedIndex:s,onSelect:r,failedSolutions:o=[]})=>e.jsx("div",{className:"flex items-center gap-2 flex-wrap mb-4",children:t.map((d,n)=>e.jsxs(j,{type:"button",variant:s===n?"default":"outline",className:`${o.includes(n)?"bg-red-100 hover:bg-red-200 text-red-700":"bg-blue-100 hover:bg-blue-200 text-blue-700"} ${s===n?"border-2 border-blue-500":""}`,onClick:()=>r(n),children:["Solution ",n+1]},n))}),us=({result:t})=>e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Status: "}),e.jsx("span",{className:t.status.id===3?"text-green-600":"text-red-600",children:t.status.description})]}),t.compileErrors&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-red-600",children:"Compile Errors: "}),e.jsx("pre",{className:"bg-red-100 p-2 rounded text-sm overflow-x-auto",children:t.compileErrors})]}),t.runTimeErrors&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-red-600",children:"Runtime Errors: "}),e.jsx("pre",{className:"bg-red-100 p-2 rounded text-sm overflow-x-auto",children:t.runTimeErrors})]})]}),hs=({form:t,setIsRunSuccess:s})=>{var G;const[r,o]=c.useState([{name:"Solution.java",content:""}]),[d,n]=c.useState("Solution.java"),[u,p]=c.useState(""),[E,T]=c.useState("testcase"),[b,L]=c.useState(0),[h,D]=c.useState(null),[m,k]=c.useState([]),[z,ue]=c.useState(0),[R,he]=c.useState(null),[O,J]=c.useState(!1),{toast:P}=de(),{setValue:U}=t;console.log(m);const je=()=>{const l=`Solution${Math.max(...r.map(i=>{const x=i.name.match(/Solution(\d+)\.java/);return x?parseInt(x[1]):0}))+1}.java`;o(i=>[...i,{name:l,content:""}]),n(l),s(!1)},pe=()=>{const a=r.every(i=>i.content.trim()!==""),l=u.trim()!=="";return a&&l},be=a=>{if(r.length>1){const l=r.findIndex(x=>x.name===a),i=r.filter(x=>x.name!==a);for(let x=l;x<i.length;x++){const I=i[x].name.match(/Solution(\d+)\.java/);if(I){const $=parseInt(I[1])-1;i[x].name=`Solution${$}.java`}}o(i),d===a&&n(i[l]?i[l].name:i[i.length-1].name)}},fe=a=>{o(l=>l.map(i=>i.name===d?{...i,content:a}:i))},ve=a=>{p(a)},ge=async()=>{if(!pe()){P({variant:"destructive",title:"Empty Code or Test Content",description:"Your code or test content is empty, please check again"});return}J(!0),T("result");const a=t.getValues(),l={resourceLimits:{cpuTimeLimit:a.cpuTimeLimit,cpuExtraTime:a.cpuExtraTime,memoryLimit:a.memoryLimit*1024,enableNetwork:a.enableNetwork,stackLimit:a.stackLimit*1024,maxThread:a.maxThread,maxFileSize:a.maxFileSize*1024}};console.log(l);const x={batchCodeExecuteDto:{languageCode:"Java",testCases:Le(m).testCases,solutionCodes:r.map(w=>w.content),testCode:u},resourceLimits:l.resourceLimits},I=Ee(m);U("testCases",I.testCases);const $=[{fileName:"Main.java",template:"",testCode:u,description:"",languageCode:"Java",solutions:r.map(w=>({fileName:"Main.java",solutionCode:w.content,description:"",languageCode:"Java",priority:!0}))}];U("createTestScriptDto",$);try{const w=await Xe(x);if(he(w.codeExecuteDtos),w.codeExecuteDtos.some(A=>A.compileErrors||A.runTimeErrors)){P({variant:"destructive",title:"Runcode Result",description:"There are compile or runtime errors. Please check your code."}),s(!1);return}const Te=w.codeExecuteDtos.some(A=>A.testResults.some(Se=>!Se.isPass));console.log(w),Te?(P({variant:"destructive",title:"Runcode Result",description:"Some test cases failed, please check your code again"}),s(!1)):(P({variant:"success",title:"Runcode Result",description:"All test cases passed successfully!"}),s(!0))}catch(w){P({variant:"destructive",title:"Runcode Result",description:"There was a problem with your request.",action:e.jsx(ls,{altText:"Try again",children:"Try again"})}),s(!1),console.error("Error creating course:",w)}finally{J(!1)}},Ne=a=>Object.keys(a).filter(l=>l!=="expectedOutput"&&l!=="isHidden"),S=R&&R[z],_=S&&S.testResults[b],Ce=R?R.map((a,l)=>a.status.id!==3?l:-1).filter(a=>a!==-1):[],ye=S&&S.testResults?S.testResults.map((a,l)=>a.isPass?-1:l).filter(a=>a!==-1):[];return e.jsxs("div",{className:"flex flex-col",children:[e.jsx(as,{testCases:m,setTestCases:k}),e.jsx("div",{className:"flex justify-center",children:e.jsx(ne,{children:e.jsx(re,{className:"text-center text-2xl font-semibold",children:"Create Code Problem"})})}),e.jsx("div",{className:"h-[800px] rounded-xl border z-0",children:e.jsxs(W,{direction:"vertical",children:[e.jsx(B,{defaultSize:70,children:e.jsxs(W,{direction:"horizontal",children:[e.jsx(B,{defaultSize:50,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-background shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("h2",{className:"text-sm font-medium",children:"Solution"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ze,{children:[e.jsx(es,{asChild:!0,children:e.jsxs(j,{variant:"outline",className:"w-[200px] justify-between",children:[d,e.jsx(ke,{className:"ml-2 h-4 w-4 opacity-50"})]})}),e.jsx(ss,{className:"w-[200px]",children:r.map(a=>e.jsxs(ts,{onSelect:()=>n(a.name),className:"justify-between",children:[a.name,r.length>1&&e.jsx(j,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4 p-0",onClick:l=>{l.stopPropagation(),be(a.name)},children:e.jsx(qe,{className:"h-3 w-3"})})]},a.name))})]}),e.jsx(j,{type:"button",variant:"ghost",size:"icon",onClick:je,children:e.jsx(ns,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex-1 w-full min-h-0",children:e.jsx(Z,{height:"100%",defaultLanguage:"java",theme:"vs-dark",value:((G=r.find(a=>a.name===d))==null?void 0:G.content)||"",onChange:fe,options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,automaticLayout:!0,lineNumbers:"on",lineNumbersMinChars:3,padding:{top:10,bottom:10}}})})]})}),e.jsx(ee,{}),e.jsx(B,{defaultSize:50,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b bg-background shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("h2",{className:"text-sm font-medium",children:"Test"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(se,{value:"test.java",className:"flex-1",children:e.jsx(te,{className:"p-0 bg-transparent h-7",children:e.jsx(V,{value:"test.java",className:"relative px-3 text-xs bg-background text-foreground h-7",children:"Main.java"})})})})]}),e.jsx("div",{className:"flex-1 w-full min-h-0",children:e.jsx(Z,{height:"100%",defaultLanguage:"java",theme:"vs-dark",value:u,onChange:ve,options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,automaticLayout:!0,lineNumbers:"on",lineNumbersMinChars:3,padding:{top:10,bottom:10}}})})]})})]})}),e.jsx(ee,{}),e.jsx(B,{defaultSize:30,children:e.jsx(ie,{className:"flex h-full flex-col rounded-none",children:e.jsxs(se,{value:E,onValueChange:T,className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between border-b px-4 py-2 bg-gray-400",children:[e.jsxs(te,{children:[e.jsx(V,{value:"testcase",children:"Testcase"}),e.jsx(V,{value:"result",children:"Test Result"})]}),h===!1&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"text-red-700 w-8 h-8"}),e.jsx("p",{className:"text-red-700 font-medium",children:"Failed, please check Test Result"})]}),h===!0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"text-green-700 w-8 h-8"}),e.jsx("p",{className:"text-green-700 font-medium",children:"Success, you can move to the next step."})]}),e.jsx(j,{type:"button",onClick:ge,disabled:O,children:O?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"mr-2 h-4 w-4 animate-spin"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Run"]})})]}),e.jsxs(Fe,{className:"flex-1",children:[e.jsx(ae,{value:"testcase",className:"p-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:m.map((a,l)=>e.jsxs(j,{type:"button",variant:b===l?"default":"outline",className:"bg-emerald-100 hover:bg-emerald-200 text-emerald-700",onClick:()=>L(l),children:["Case ",l+1]},l))}),m[b]&&e.jsx("div",{className:"space-y-4",children:Ne(m[b]).map(a=>e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:[a," ="]}),e.jsx(y,{className:"font-mono bg-muted",value:m[b][a],readOnly:!0})]},a))})]})}),e.jsx(ae,{value:"result",className:"p-4",children:R?O?e.jsx(Ge,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(xs,{solutions:R,selectedIndex:z,onSelect:ue,failedSolutions:Ce}),S&&S.testResults&&S.testResults.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ds,{testCases:S.testResults,selectedIndex:b,onSelect:L,failedTestCases:ye}),_&&e.jsx(ms,{result:_})]}),e.jsx(us,{result:S})]}):e.jsx("div",{className:"text-center text-lg font-medium text-gray-500",children:"Please run Code First"})})]})]})})})]})})]})},js=c.memo(hs),ps=({setIsSaveTemplate:t})=>{const[s,r]=c.useState(""),{setValue:o,getValues:d}=$e(),n=p=>{r(p||"")},u=()=>{const p=d("createTestScriptDto");p[0].template=s,o("createTestScriptDto",p),t(!0)};return e.jsxs(ie,{className:"w-full max-w-4xl mx-auto",children:[e.jsxs(ne,{children:[e.jsx(re,{children:"Final Step: Set Up Problem Template"}),e.jsx(Re,{children:"This is the last step in creating your programming problem. Here, you can set up the initial code template that learners will see when they start the problem. Include any necessary class structures, method signatures, or comments to guide the learners."})]}),e.jsx(De,{children:e.jsxs("div",{className:"flex flex-col h-[400px] border rounded-md overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-background shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5"}),e.jsx("h2",{className:"text-sm font-medium",children:"Problem Template"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Ke,{defaultValue:"solution.java",className:"flex-1",children:e.jsx(Qe,{className:"h-8 p-0 bg-transparent",children:e.jsx(We,{value:"solution.java",className:"px-3 text-xs h-8 data-[state=active]:bg-muted",children:"Solution.java"})})})})]}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(Ye,{height:"100%",defaultLanguage:"java",theme:"vs-dark",value:s,onChange:n,options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,automaticLayout:!0,lineNumbers:"on",lineNumbersMinChars:3,padding:{top:10,bottom:10}}})})]})}),e.jsx(Pe,{className:"flex justify-between",children:e.jsxs(j,{type:"button",onClick:u,children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Save"]})})]})},bs=H.memo(ps),fs=({activeTab:t,form:s,setIsSaveTemplate:r,setIsRunSuccess:o})=>e.jsx("div",{className:"mx-auto px-4 py-24",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{style:{display:t==="basic"?"block":"none"},children:e.jsx(os,{form:s})}),e.jsx("div",{style:{display:t==="code"?"block":"none"},children:e.jsx(js,{form:s,setIsRunSuccess:o})}),e.jsx("div",{style:{display:t==="description"?"block":"none"},children:e.jsx(bs,{form:s,setIsSaveTemplate:r})})]})}),vs=H.memo(fs),gs=({})=>{const[t,s]=c.useState("basic"),[r,o]=c.useState(!1),{toast:d}=de(),[n,u]=c.useState(!1),[p,E]=c.useState(!1);console.log(r);const T=Ve({defaultValues:{title:"",description:"",problemType:"Challenge",difficultyType:"Medium",cpuTimeLimit:2,cpuExtraTime:2.5,memoryLimit:250,stackLimit:64,maxThread:70,maxFileSize:10,enableNetwork:!1,isActive:!0,testCases:{},createTestScriptDto:[]}}),b=async L=>{const h={...L};h.memoryLimit=h.memoryLimit*1024,h.maxFileSize=h.maxFileSize*1024,h.stackLimit=h.stackLimit*1024;const D={createProblemDto:h};console.log(D),E(!0);try{const m=await rs(D);d({variant:"success",title:"Create problem successfully",description:"Create problem successfully"})}catch(m){d({variant:"destructive",title:"Oops! Something went wrong",description:"Please try again!",action:e.jsx(ToastAction,{altText:"Try again",onClick:()=>b(T.getValues()),children:"Try again"})}),console.error("Error creating problem:",m)}finally{E(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(is,{backTo:"Back to Curriculum"}),e.jsx(He,{...T,children:e.jsxs("form",{onSubmit:T.handleSubmit(b),children:[e.jsx(vs,{activeTab:t,form:T,setIsSaveTemplate:o,setIsRunSuccess:u}),e.jsx(cs,{activeTab:t,setActiveTab:s,isSaveTemplate:r,isRunSuccess:n,isLoadingSubmit:p})]})})]})},Qs=H.memo(gs);export{Qs as default};
//# sourceMappingURL=CreateProblemAg-B5pgju4x.js.map

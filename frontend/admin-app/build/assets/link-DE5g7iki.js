import{r as o,a2 as ne,a3 as se,a4 as H,a5 as oe,a6 as K,a7 as le,a8 as ie,a9 as ce,aa as U,Z as ue}from"./index-DoHIwt5e.js";const de="Error preloading route! ☝️";function fe(r,v){const t=ne(),[c,m]=o.useState(!1),p=o.useRef(!1),l=se(v),{activeProps:y=()=>({className:"active"}),inactiveProps:q=()=>({}),activeOptions:s,to:T,preload:w,preloadDelay:B,replace:O,startTransition:j,resetScroll:V,viewTransition:W,children:M,target:d,disabled:n,style:b,className:g,onClick:P,onFocus:k,onMouseEnter:S,onMouseLeave:x,onTouchStart:E,ignoreBlocker:Z,...$}=r,{params:pe,search:ve,hash:me,state:ye,mask:Te,...F}=$,I=o.useMemo(()=>{try{return new URL(`${T}`),"external"}catch{}return"internal"},[T]),G=H({select:e=>e.location.search}),i=o.useMemo(()=>t.buildLocation(r),[t,r,G]),f=o.useMemo(()=>w??t.options.defaultPreload,[t.options.defaultPreload,w]),J=B??t.options.defaultPreloadDelay??0,L=H({select:e=>{if(s!=null&&s.exact){if(!oe(e.location.pathname,i.pathname,t.basepath))return!1}else{const a=K(e.location.pathname,t.basepath).split("/");if(!K(i.pathname,t.basepath).split("/").every((ae,re)=>ae===a[re]))return!1}return((s==null?void 0:s.includeSearch)??!0)&&!le(e.location.search,i.search,{partial:!(s!=null&&s.exact),ignoreUndefined:!(s!=null&&s.explicitUndefined)})?!1:s!=null&&s.includeHash?e.location.hash===i.hash:!0}}),u=o.useCallback(()=>{t.preloadRoute(r).catch(e=>{console.warn(e),console.warn(de)})},[r,t]),Q=o.useCallback(e=>{e!=null&&e.isIntersecting&&u()},[u]);if(ie(l,Q,{rootMargin:"100px"},{disabled:!!n||f!=="viewport"}),ce(()=>{p.current||!n&&f==="render"&&(u(),p.current=!0)},[n,u,f]),I==="external")return{...F,ref:l,type:I,href:T,...M&&{children:M},...d&&{target:d},...n&&{disabled:n},...b&&{style:b},...g&&{className:g},...P&&{onClick:P},...k&&{onFocus:k},...S&&{onMouseEnter:S},...x&&{onMouseLeave:x},...E&&{onTouchStart:E}};const X=e=>{if(!n&&!he(e)&&!e.defaultPrevented&&(!d||d==="_self")&&e.button===0){e.preventDefault(),ue.flushSync(()=>{m(!0)});const a=t.subscribe("onResolved",()=>{a(),m(!1)});t.buildAndCommitLocation({...r,replace:O,resetScroll:V,startTransition:j,viewTransition:W,ignoreBlocker:Z})}},D=e=>{n||f&&u()},Y=D,ee=e=>{if(n)return;const a=e.target||{};if(f){if(a.preloadTimeout)return;a.preloadTimeout=setTimeout(()=>{a.preloadTimeout=null,u()},J)}},te=e=>{if(n)return;const a=e.target||{};a.preloadTimeout&&(clearTimeout(a.preloadTimeout),a.preloadTimeout=null)},h=e=>a=>{var _;(_=a.persist)==null||_.call(a),e.filter(Boolean).forEach(A=>{a.defaultPrevented||A(a)})},R=L?U(y,{})??{}:{},C=L?{}:U(q,{}),N=[g,R.className,C.className].filter(Boolean).join(" "),z={...b,...R.style,...C.style};return{...F,...R,...C,href:n?void 0:i.maskedLocation?t.history.createHref(i.maskedLocation.href):t.history.createHref(i.href),ref:l,onClick:h([P,X]),onFocus:h([k,D]),onMouseEnter:h([S,ee]),onMouseLeave:h([x,te]),onTouchStart:h([E,Y]),disabled:!!n,target:d,...Object.keys(z).length&&{style:z},...N&&{className:N},...n&&{role:"link","aria-disabled":!0},...L&&{"data-status":"active","aria-current":"page"},...c&&{"data-transitioning":"transitioning"}}}const ge=o.forwardRef((r,v)=>{const{_asChild:t,...c}=r,{type:m,ref:p,...l}=fe(c,v),y=typeof c.children=="function"?c.children({isActive:l["data-status"]==="active"}):c.children;return typeof t>"u"&&delete l.disabled,o.createElement(t||"a",{...l,ref:p},y)});function he(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}export{ge as L};
//# sourceMappingURL=link-DE5g7iki.js.map

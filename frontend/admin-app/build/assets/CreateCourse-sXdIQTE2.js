import{c as A,r as d,j as e,a8 as X,I as ce,y as _,z as $,A as q,K as B,B as R,a3 as D,a9 as Y,J as P,u as me,a5 as de}from"./index-CZHDJBCk.js";import{T as ue,a as xe,b as U,c as H}from"./tabs-B72ujN-I.js";import{A as pe,a as he,b as ge}from"./alert-DkMiZX8f.js";import{L as fe}from"./overlay-CchFdlc6.js";import{u as J,F as W}from"./index.esm-BBIM_QSt.js";import{o as M,s as g,n as K,t as Z,e as je}from"./index-DGFZ-UbV.js";import{I as S}from"./index-CsZvwwPz.js";import{F as Q,a as v,b as N,c as y,d as C,e as w,M as E}from"./markdown-form-field-DZLEdgmc.js";import{F as be}from"./file-text-CxCffx7e.js";import{U as ve}from"./users-Tnu-vKy7.js";import{C as Ne}from"./clock-BnAYW0nh.js";import{C as ee}from"./chevron-right-B2BfPifc.js";import{S as ye,a as Ce,b as we,c as Se,d as T}from"./select-DvMDIVW3.js";import{U as Pe}from"./upload-BkudaYyr.js";import{D as Ee}from"./dollar-sign-DnbacGp8.js";import{P as Te}from"./page-container-Ci6Xf41F.js";import{f as Ie}from"./courseApi-4Gtm13zl.js";import{u as Ae}from"./use-toast-DxaFKq84.js";import{A as ke}from"./arrow-left-Dk0JVUuI.js";import{X as Le}from"./x-Br18mQUL.js";import{B as Fe}from"./book-open-DxhmDxZT.js";import{R as De}from"./rocket-13oleF6K.js";import"./index-Fh3QMK6n.js";import"./index-DQUYlbEB.js";import"./label-990KbfKz.js";import"./index-CpqmcsmY.js";import"./index-Dg4EHzo4.js";import"./sidebar-KYnXOFLW.js";import"./index-Btbx0t0H.js";import"./tooltip-BaTE3lt9.js";import"./axios-OWqOmaEp.js";import"./axios-CCb-kr4I.js";/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=A("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=A("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=A("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=A("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);function Be(s,o=[]){let a=[];function i(n,m){const l=d.createContext(m),t=a.length;a=[...a,m];function c(p){const{scope:x,children:f,...h}=p,k=(x==null?void 0:x[s][t])||l,L=d.useMemo(()=>h,Object.values(h));return e.jsx(k.Provider,{value:L,children:f})}function u(p,x){const f=(x==null?void 0:x[s][t])||l,h=d.useContext(f);if(h)return h;if(m!==void 0)return m;throw new Error(`\`${p}\` must be used within \`${n}\``)}return c.displayName=n+"Provider",[c,u]}const r=()=>{const n=a.map(m=>d.createContext(m));return function(l){const t=(l==null?void 0:l[s])||n;return d.useMemo(()=>({[`__scope${s}`]:{...l,[s]:t}}),[l,t])}};return r.scopeName=s,[i,Re(r,...o)]}function Re(...s){const o=s[0];if(s.length===1)return o;const a=()=>{const i=s.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(n){const m=i.reduce((l,{useScope:t,scopeName:c})=>{const p=t(n)[`__scope${c}`];return{...l,...p}},{});return d.useMemo(()=>({[`__scope${o.scopeName}`]:m}),[m])}};return a.scopeName=o.scopeName,a}var V="Progress",z=100,[Ve,ks]=Be(V),[ze,Ue]=Ve(V),se=d.forwardRef((s,o)=>{const{__scopeProgress:a,value:i=null,max:r,getValueLabel:n=He,...m}=s;(r||r===0)&&!G(r)&&console.error(Ge(`${r}`,"Progress"));const l=G(r)?r:z;i!==null&&!O(i,l)&&console.error(Oe(`${i}`,"Progress"));const t=O(i,l)?i:null,c=I(t)?n(t,l):void 0;return e.jsx(ze,{scope:a,value:t,max:l,children:e.jsx(X.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":I(t)?t:void 0,"aria-valuetext":c,role:"progressbar","data-state":te(t,l),"data-value":t??void 0,"data-max":l,...m,ref:o})})});se.displayName=V;var re="ProgressIndicator",ae=d.forwardRef((s,o)=>{const{__scopeProgress:a,...i}=s,r=Ue(re,a);return e.jsx(X.div,{"data-state":te(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...i,ref:o})});ae.displayName=re;function He(s,o){return`${Math.round(s/o*100)}%`}function te(s,o){return s==null?"indeterminate":s===o?"complete":"loading"}function I(s){return typeof s=="number"}function G(s){return I(s)&&!isNaN(s)&&s>0}function O(s,o){return I(s)&&!isNaN(s)&&s<=o&&s>=0}function Ge(s,o){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${o}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${z}\`.`}function Oe(s,o){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${o}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${z} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var oe=se,Xe=ae;const le=d.forwardRef(({className:s,value:o,...a},i)=>e.jsx(oe,{ref:i,className:ce("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",s),...a,children:e.jsx(Xe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(o||0)}%)`}})}));le.displayName=oe.displayName;const Ye=M({title:g().min(1,"Title is required").max(100,"Title must not exceed 100 characters"),headline:g().min(1,"Headline is required").max(200,"Headline must not exceed 200 characters"),prerequisites:g().min(1,"Prerequisites are required"),description:g().min(1,"Description is required"),objectives:g().min(1,"Course objectives are required"),targetAudiences:g().min(1,"Target audiences are required"),timeEstimation:K().min(1,"Estimated time must be greater than 0").max(1e3,"Estimated time must not exceed 1000 hours")});function Je({onSubmit:s,initialData:o}){const a=J({resolver:Z(Ye),defaultValues:o}),i=a.handleSubmit(r=>{s(r)},r=>{});return e.jsx(W,{...a,children:e.jsx(Q,{...a,children:e.jsx("form",{onSubmit:i,className:"space-y-8",children:e.jsxs(_,{className:"w-full shadow-md",children:[e.jsxs($,{children:[e.jsx(q,{className:"text-2xl font-bold",children:"Course Details"}),e.jsx(B,{children:"Provide the essential information about your course"})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(v,{control:a.control,name:"title",render:({field:r})=>e.jsxs(N,{children:[e.jsxs(y,{className:"text-base font-semibold",children:["Course Title",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(C,{children:e.jsx(S,{...r,placeholder:"Enter course title",className:"w-full"})}),e.jsx(w,{})]})}),e.jsx(v,{control:a.control,name:"headline",render:({field:r})=>e.jsxs(N,{children:[e.jsxs(y,{className:"text-base font-semibold",children:["Course Headline",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(C,{children:e.jsx(S,{...r,placeholder:"Enter course headline",className:"w-full"})}),e.jsx(w,{})]})})]}),e.jsx(D,{className:"my-6"}),e.jsx(E,{control:a.control,name:"description",label:"Course Description",placeholder:"Enter course description...",icon:e.jsx(be,{className:"w-5 h-5 text-muted-foreground"})}),e.jsx(E,{control:a.control,name:"prerequisites",label:"Prerequisites",placeholder:"Enter course prerequisites...",icon:e.jsx(Me,{className:"w-5 h-5 text-muted-foreground"})}),e.jsx(E,{control:a.control,name:"objectives",label:"Course Objectives",placeholder:"Enter course objectives...",icon:e.jsx(qe,{className:"w-5 h-5 text-muted-foreground"})}),e.jsx(E,{control:a.control,name:"targetAudiences",label:"Target Audiences",placeholder:"Describe the target audiences...",icon:e.jsx(ve,{className:"w-5 h-5 text-muted-foreground"})}),e.jsx(D,{className:"my-6"}),e.jsx(v,{control:a.control,name:"timeEstimation",render:({field:r})=>e.jsxs(N,{children:[e.jsxs(y,{className:"text-base font-semibold",children:["Estimated Course Duration (hours)",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(C,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ne,{className:"w-5 h-5 text-muted-foreground mr-2"}),e.jsx(S,{type:"number",step:"0.5",...r,onChange:n=>r.onChange(parseFloat(n.target.value)),placeholder:"Enter estimated course duration",className:"w-full"})]})}),e.jsx(w,{})]})})]}),e.jsx(Y,{className:"flex justify-end",children:e.jsxs(P,{type:"submit",className:"w-full sm:w-auto",children:["Next to Step 2",e.jsx(ee,{className:"w-4 h-4 ml-2"})]})})]})})})})}const We=5e6,ne=["image/jpeg","image/jpg","image/png","image/webp"],Ke=M({image:M({fileName:g(),base64Image:g(),contentType:g().refine(s=>ne.includes(s),{message:"Only .jpg, .jpeg, .png and .webp formats are supported."})},{required_error:"Course image is required"}),courseLevel:je(["Basic","Intermediate","Advanced","Expert"],{required_error:"Please select a course level"}),price:K().min(0,"Price must be 0 or greater").max(1e3,"Price must not exceed 1000 USD").or(g().regex(/^\d+(\.\d{1,2})?$/).transform(Number)).refine(s=>s>=0&&s<=1e3,{message:"Price must be between 0 and 1000 USD"})});function Ze({onSubmit:s,onChange:o,initialData:a}){const[i,r]=d.useState(null),n=J({resolver:Z(Ke),defaultValues:a});d.useEffect(()=>{n.reset(a),a.image&&a.image.base64Image&&r(a.image.base64Image)},[a,n]);const m=n.handleSubmit(t=>{s(t)}),l=(t,c)=>{o({[t]:c}),n.setValue(t,c)};return e.jsx(W,{...n,children:e.jsx(Q,{...n,children:e.jsx("form",{onSubmit:m,className:"space-y-8",children:e.jsxs(_,{className:"w-full shadow-md",children:[e.jsxs($,{children:[e.jsx(q,{className:"text-2xl font-bold",children:"Course Landing Page"}),e.jsx(B,{children:"Set up your course's public information to attract students"})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsx(v,{control:n.control,name:"image",render:({field:t})=>e.jsxs(N,{children:[e.jsxs(y,{className:"text-base font-semibold flex items-center gap-1",children:["Course Image ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(C,{children:e.jsx("div",{className:"flex flex-col items-center space-y-4",children:i?e.jsxs("div",{className:"group relative w-full max-w-2xl aspect-video rounded-lg overflow-hidden bg-gray-100 border-2 border-gray-200",children:[e.jsx("img",{src:i,alt:"Course preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(P,{type:"button",variant:"secondary",size:"sm",onClick:()=>{r(null),t.onChange(null),l("image",null)},className:"text-white hover:text-red-400",children:"Remove Image"})})]}):e.jsx("div",{className:"w-full",children:e.jsxs("label",{htmlFor:"dropzone-file",className:`relative flex flex-col items-\r
center justify-center w-full h-[280px] border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50/50 hover:bg-gray-50 transition-colors duration-200`,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6 px-4",children:[e.jsx("div",{className:"mb-3 p-4 rounded-full bg-gray-100",children:e.jsx(Pe,{className:"w-8 h-8 text-gray-500"})}),e.jsx("p",{className:"mb-2 text-sm text-gray-500",children:e.jsx("span",{className:"font-medium",children:"Click to upload"})}),e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["PNG, JPG or WebP",e.jsx("br",{}),"(Recommended: 1280x720px)"]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Max file size: 5MB"})]}),e.jsx(S,{id:"dropzone-file",type:"file",accept:"image/png,image/jpeg,image/webp",className:"hidden",onChange:c=>{var p;const u=(p=c.target.files)==null?void 0:p[0];if(u){if(u.size>We){n.setError("image",{type:"manual",message:"Image size should not exceed 5MB"});return}if(!ne.includes(u.type)){n.setError("image",{type:"manual",message:"Please upload a valid image file (PNG, JPG, or WebP)"});return}const x=new FileReader;x.onloadend=()=>{const f=x.result;r(f);const h={fileName:u.name,base64Image:f,contentType:u.type};t.onChange(h),l("image",h)},x.readAsDataURL(u)}}})]})})})}),e.jsx(w,{className:"mt-2"})]})}),e.jsx(D,{className:"my-6"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(v,{control:n.control,name:"courseLevel",render:({field:t})=>e.jsxs(N,{children:[e.jsxs(y,{className:"text-base font-semibold",children:["Course Level ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(ye,{onValueChange:c=>{t.onChange(c),l("courseLevel",c)},value:t.value,children:[e.jsx(C,{children:e.jsxs(Ce,{className:"w-full",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),e.jsx(we,{placeholder:"Select a level"})]})}),e.jsxs(Se,{children:[e.jsx(T,{value:"Basic",children:"Basic"}),e.jsx(T,{value:"Intermediate",children:"Intermediate"}),e.jsx(T,{value:"Advanced",children:"Advanced"}),e.jsx(T,{value:"Expert",children:"Expert"})]})]}),e.jsx(w,{})]})}),e.jsx(v,{control:n.control,name:"price",render:({field:t})=>e.jsxs(N,{children:[e.jsxs(y,{className:"text-base font-semibold",children:["Price (USD) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(C,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{className:"w-5 h-5 text-muted-foreground mr-2"}),e.jsx(S,{type:"number",step:"0.01",min:"0",max:"1000",...t,onChange:c=>{const u=parseFloat(c.target.value);t.onChange(u),l("price",u)},placeholder:"Enter course price",className:"w-full"})]})}),e.jsx(w,{})]})})]})]}),e.jsx(Y,{className:"flex justify-end",children:e.jsxs(P,{type:"submit",className:"w-full sm:w-auto",children:["Save Course",e.jsx(ee,{className:"w-4 h-4 ml-2"})]})})]})})})})}function Ls(){const s=[{label:"Course Table",href:"/course-table"},{label:"Create Course",href:"/create-course"}],[o,a]=d.useState("step1"),[i,r]=d.useState(null),[n,m]=d.useState({title:"",description:"",headline:"",timeEstimation:0,prerequisites:"",objectives:"",targetAudiences:"",image:null,courseLevel:"Basic",price:0}),[l,t]=d.useState(!1),[c,u]=d.useState(!1),{toast:p}=Ae(),x=me(),f=()=>{window.confirm("Are you sure you want to leave? Your progress will be lost.")&&x({to:"/course-table"})},h=j=>{m(b=>({...b,...j})),t(!0),a("step2")},k=j=>{m(b=>({...b,...j}))},L=async j=>{u(!0),r(null);const b={createCourseDto:{...n,...j}};console.log("courseCreate",b);try{const F=await Ie(b);console.log("Course created successfully:",F),p({title:"Course created successfully",description:"Your new course has been added to the course list.",duration:3e3}),x({to:"/course-table"})}catch(F){console.error("Error creating course:",F),r("There was a problem creating your course. Please try again."),p({title:"Error creating course",description:"There was a problem creating your course. Please try again.",variant:"destructive",duration:3e3})}finally{u(!1)}},ie=j=>{if(j==="step2"&&!l){p({title:"Please complete Step 1",description:"You need to fill out all required fields in Step 1 before proceeding.",variant:"destructive",duration:3e3});return}a(j)};return e.jsx(Te,{breadcrumbs:s,children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(_,{className:"shadow-lg w-full max-w-6xl mx-auto",children:[e.jsx($,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{className:"text-2xl sm:text-3xl font-bold",children:"Create New Course"}),e.jsx(B,{className:"mt-1",children:"Fill in the details to create your new course"})]}),e.jsxs(P,{variant:"outline",onClick:f,className:"w-full sm:w-auto",children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Back to Course List"]})]})}),e.jsxs(R,{className:"w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(le,{value:o==="step1"?50:100,className:"w-full"}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["Step ",o==="step1"?"1":"2"," of 2"]}),e.jsxs("span",{children:[o==="step1"?"50%":"100%"," Complete"]})]})]}),i&&e.jsxs(pe,{variant:"destructive",className:"mb-6",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx(he,{children:"Error"}),e.jsx(ge,{children:i}),e.jsx(P,{variant:"ghost",className:"h-4 w-4 p-0 absolute top-4 right-4",onClick:()=>r(null),children:e.jsx(Le,{className:"h-4 w-4"})})]}),e.jsxs(ue,{value:o,onValueChange:ie,className:"w-full",children:[e.jsx(xe,{className:"w-full h-auto p-0 bg-transparent border-b border-gray-200",children:e.jsxs("div",{className:"grid w-full grid-cols-2",children:[e.jsxs(U,{value:"step1",className:`
                      flex items-center justify-center px-4 sm:px-8 py-3 sm:py-4 
                      border-b-2 transition-all duration-200 text-sm sm:text-base
                      hover:text-primary hover:bg-gray-50
                      data-[state=active]:border-primary data-[state=active]:text-primary
                      data-[state=inactive]:border-transparent data-[state=inactive]:text-gray-500
                    `,children:[e.jsx(Fe,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"}),"Course Details",l&&e.jsx($e,{className:"w-3 h-3 sm:w-4 sm:h-4 ml-2 text-green-500"})]}),e.jsxs(U,{value:"step2",disabled:!l,className:`
                      flex items-center justify-center px-4 sm:px-8 py-3 sm:py-4 
                      border-b-2 transition-all duration-200 text-sm sm:text-base
                      hover:text-primary hover:bg-gray-50
                      data-[state=active]:border-primary data-[state=active]:text-primary
                      data-[state=inactive]:border-transparent data-[state=inactive]:text-gray-500
                      ${l?"":"opacity-50 cursor-not-allowed"}
                    `,children:[e.jsx(De,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"}),"Landing Page"]})]})}),e.jsxs("div",{className:"mt-6 w-full",children:[e.jsx(H,{value:"step1",className:"w-full",children:e.jsx(Je,{onSubmit:h,initialData:n})}),e.jsx(H,{value:"step2",className:"w-full",children:e.jsx(Ze,{onSubmit:L,onChange:k,initialData:n})})]})]})]})]}),c&&e.jsx(fe,{})]})})}export{Ls as default};
//# sourceMappingURL=CreateCourse-sXdIQTE2.js.map
